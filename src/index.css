@tailwind base;
@tailwind components;
@tailwind utilities;

/* Disable text selection & long-press callout (app feel) */
*,
*::before,
*::after {
  -webkit-user-select: none;
  user-select: none;
  -webkit-touch-callout: none;
}

/* Allow selection in inputs/textareas where user needs to type/paste */
input,
textarea,
[contenteditable="true"] {
  -webkit-user-select: text;
  user-select: text;
}

/* Image Viewer - lock body scroll while open */
body.image-viewer-open {
  overflow: hidden;
  position: fixed;
  width: 100%;
}

/* Custom Scrollbar */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: #D1D5DB;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #9CA3AF;
}

/* Animations */
@keyframes fade-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slide-up {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes loading {
  0% { transform: translateX(-100%); }
  50% { transform: translateX(100%); }
  100% { transform: translateX(-100%); }
}

.animate-loading {
  animation: loading 1.5s ease-in-out infinite;
}

.animate-fade-in {
  animation: fade-in 0.3s ease-out;
}

.animate-slide-up {
  animation: slide-up 0.3s ease-out;
}

/* Focus Ring */
*:focus-visible {
  outline: 2px solid #9ca3af;
  outline-offset: 2px;
}

/* ═══════════════════════════════════════════════════════════════ */
/* ALTO CONTRASTE — Tema Noir (Acessibilidade AA)                */
/* Base: herda estilos do dark. Overrides: neutraliza TODAS as   */
/* cores para preto/branco/cinza. Seletores de atributo cobrem   */
/* todas as shades e variantes de opacidade de cada cor.          */
/* ═══════════════════════════════════════════════════════════════ */

/* ── Background raiz ── */
html.theme-hc,
html.theme-hc body {
  background-color: #000 !important;
}

/* Safety: cream/light backgrounds que possam vazar */
html.theme-hc [class*="bg-[#f7f5f2]"] { background-color: #000 !important; }

/* ────────────────────────────────────────────────── */
/*  BG-WHITE → ESCURO (previne branco-sobre-branco)  */
/*  Badges, pills e cards com bg-white + texto que   */
/*  foi overrideado para branco ficam ilegíveis.     */
/*  Solução: fundo escuro no HC.                     */
/* ────────────────────────────────────────────────── */
html.theme-hc .bg-white {
  background-color: #222 !important;
  color: #fff !important;
}
html.theme-hc [class*="bg-white/9"] { background-color: #222 !important; }
html.theme-hc [class*="bg-white/8"] { background-color: #2a2a2a !important; }
html.theme-hc [class*="bg-white/7"] { background-color: #333 !important; }
html.theme-hc [class*="bg-white/6"] { background-color: #333 !important; }

/* ────────────────────────────────────────────────── */
/*  OVERLAYS DE IMAGEM → QUASE OPACOS               */
/*  Cards com banners (CreateHub) usam gradientes     */
/*  from-black/70 → to-black/20. Substituir por      */
/*  overlay flat escuro para legibilidade total.      */
/* ────────────────────────────────────────────────── */
html.theme-hc [class*="bg-gradient"][class*="from-black/"] {
  background: rgba(0,0,0,0.88) !important;
}

/* ────────────────────────────────────────────────── */
/*  TEXTOS COLORIDOS → BRANCO                        */
/*  Cada regra cobre TODAS as shades + opacidades    */
/* ────────────────────────────────────────────────── */
html.theme-hc [class*="text-[#FF6B6B]"],
html.theme-hc [class*="text-[#FF9F43]"],
html.theme-hc [class*="text-[#FF6B9D]"],
html.theme-hc [class*="text-[#A855F7]"],
html.theme-hc [class*="text-[#7C3AED]"],
html.theme-hc [class*="text-[#FF5252]"],
html.theme-hc [class*="text-[#FF5555]"],
html.theme-hc [class*="text-[#4ADE80]"],
html.theme-hc [class*="text-red-"],
html.theme-hc [class*="text-green-"],
html.theme-hc [class*="text-emerald-"],
html.theme-hc [class*="text-amber-"],
html.theme-hc [class*="text-yellow-"],
html.theme-hc [class*="text-blue-"],
html.theme-hc [class*="text-purple-"],
html.theme-hc [class*="text-orange-"],
html.theme-hc [class*="text-indigo-"],
html.theme-hc [class*="text-cyan-"],
html.theme-hc [class*="text-teal-"],
html.theme-hc [class*="text-pink-"],
html.theme-hc [class*="text-violet-"],
html.theme-hc [class*="text-rose-"],
html.theme-hc [class*="text-lime-"],
html.theme-hc [class*="text-sky-"],
html.theme-hc [class*="text-fuchsia-"] {
  color: #fff !important;
}

/* ────────────────────────────────────────────────── */
/*  BACKGROUNDS SÓLIDOS COLORIDOS → BRANCO + PRETO   */
/*  Botões, badges, checkboxes preenchidos            */
/* ────────────────────────────────────────────────── */
html.theme-hc .bg-\[\#FF6B6B\],
html.theme-hc .bg-\[\#FF9F43\],
html.theme-hc .bg-\[\#A855F7\],
html.theme-hc .bg-\[\#FF6B9D\],
html.theme-hc .bg-red-500,
html.theme-hc .bg-red-600,
html.theme-hc .bg-red-700,
html.theme-hc .bg-green-500,
html.theme-hc .bg-green-600,
html.theme-hc .bg-emerald-500,
html.theme-hc .bg-emerald-600,
html.theme-hc .bg-amber-500,
html.theme-hc .bg-amber-600,
html.theme-hc .bg-yellow-500,
html.theme-hc .bg-yellow-600,
html.theme-hc .bg-yellow-700,
html.theme-hc .bg-blue-500,
html.theme-hc .bg-blue-600,
html.theme-hc .bg-purple-500,
html.theme-hc .bg-purple-600,
html.theme-hc .bg-orange-500,
html.theme-hc .bg-orange-600 {
  background-color: #fff !important;
  color: #000 !important;
}

/* ────────────────────────────────────────────────── */
/*  BACKGROUNDS MARCA COM OPACIDADE (sem borda brand)*/
/*  Contextos NÃO-seleção: pills, hints, subtle bg  */
/* ────────────────────────────────────────────────── */
html.theme-hc [class*="bg-[#FF6B6B]/"],
html.theme-hc [class*="bg-[#FF9F43]/"] {
  background-color: rgba(255,255,255,0.18) !important;
}

/* ═══════════════════════════════════════════════════ */
/*  INVERSÃO DE SELEÇÃO                               */
/*  Regra: selecionado = fundo BRANCO + texto PRETO   */
/*  NÃO-selecionado = fundo escuro + texto claro      */
/* ═══════════════════════════════════════════════════ */

/* A) Gradientes com opacidade (sidebar, PS apresentação/acabamento/fundos) */
html.theme-hc [class*="bg-gradient"][class*="from-[#FF6B6B]/"],
html.theme-hc [class*="bg-gradient"][class*="from-[#FF9F43]/"] {
  background: #fff !important;
  color: #000 !important;
}
html.theme-hc [class*="bg-gradient"][class*="from-[#FF6B6B]/"] [class*="text-"],
html.theme-hc [class*="bg-gradient"][class*="from-[#FF9F43]/"] [class*="text-"],
html.theme-hc [class*="bg-gradient"][class*="from-[#FF6B6B]/"] i,
html.theme-hc [class*="bg-gradient"][class*="from-[#FF9F43]/"] i {
  color: #000 !important;
}

/* B) bg-white/10 + border-white (PS/CS ângulos, PS view mode, Admin reports) */
html.theme-hc [class*="bg-white/1"][class*="border-white/"] {
  background-color: #fff !important;
  color: #000 !important;
  border-color: #fff !important;
}
html.theme-hc [class*="bg-white/1"][class*="border-white/"] [class*="text-"],
html.theme-hc [class*="bg-white/1"][class*="border-white/"] i {
  color: #000 !important;
}

/* C) bg-brand/ + border-brand (LC pose, seleções com borda de marca) */
html.theme-hc [class*="bg-[#FF6B6B]/"][class*="border-[#FF6B6B]"] {
  background-color: #fff !important;
  color: #000 !important;
}
html.theme-hc [class*="bg-[#FF6B6B]/"][class*="border-[#FF6B6B]"] [class*="text-"],
html.theme-hc [class*="bg-[#FF6B6B]/"][class*="border-[#FF6B6B]"] i {
  color: #000 !important;
}

/* D) Elementos sólidos DENTRO de inversão → escuro (evita branco-sobre-branco) */
html.theme-hc [class*="from-[#FF6B6B]/"] [class*="bg-gradient"][class*="from-[#FF6B6B]"],
html.theme-hc [class*="from-[#FF6B6B]/"] .bg-\[\#FF6B6B\],
html.theme-hc [class*="from-[#FF6B6B]/"] .bg-\[\#FF9F43\],
html.theme-hc [class*="bg-white/1"][class*="border-white/"] [class*="bg-gradient"][class*="from-[#FF6B6B]"],
html.theme-hc [class*="bg-[#FF6B6B]/"][class*="border-[#FF6B6B]"] [class*="bg-gradient"][class*="from-[#FF6B6B]"] {
  background: #222 !important;
  color: #fff !important;
}
html.theme-hc [class*="from-[#FF6B6B]/"] [class*="bg-gradient"][class*="from-[#FF6B6B]"] i,
html.theme-hc [class*="from-[#FF6B6B]/"] .bg-\[\#FF6B6B\] i,
html.theme-hc [class*="bg-white/1"][class*="border-white/"] [class*="bg-gradient"][class*="from-[#FF6B6B]"] i,
html.theme-hc [class*="bg-[#FF6B6B]/"][class*="border-[#FF6B6B]"] [class*="bg-gradient"][class*="from-[#FF6B6B]"] i {
  color: #fff !important;
}

/* E) Classe utilitária para componentes com bg-neutral selecionado */
html.theme-hc .hc-selected {
  background-color: #fff !important;
  color: #000 !important;
  border-color: #fff !important;
}
html.theme-hc .hc-selected [class*="text-"],
html.theme-hc .hc-selected i {
  color: #000 !important;
}

/* ────────────────────────────────────────────────── */
/*  BACKGROUNDS SEMÂNTICOS COM OPACIDADE → SUTIL     */
/*  Info boxes, warnings, highlights neutros          */
/* ────────────────────────────────────────────────── */
html.theme-hc [class*="bg-[#A855F7]/"],
html.theme-hc [class*="bg-[#FF6B9D]/"],
html.theme-hc .bg-red-50, html.theme-hc .bg-red-100,
html.theme-hc [class*="bg-red-"][class*="/"],
html.theme-hc .bg-green-50, html.theme-hc .bg-green-100,
html.theme-hc [class*="bg-green-"][class*="/"],
html.theme-hc .bg-emerald-50, html.theme-hc .bg-emerald-100,
html.theme-hc [class*="bg-emerald-"][class*="/"],
html.theme-hc .bg-amber-50, html.theme-hc .bg-amber-100,
html.theme-hc [class*="bg-amber-"][class*="/"],
html.theme-hc .bg-yellow-50, html.theme-hc .bg-yellow-100,
html.theme-hc [class*="bg-yellow-"][class*="/"],
html.theme-hc .bg-blue-50, html.theme-hc .bg-blue-100,
html.theme-hc [class*="bg-blue-"][class*="/"],
html.theme-hc .bg-purple-50, html.theme-hc .bg-purple-100,
html.theme-hc [class*="bg-purple-"][class*="/"],
html.theme-hc .bg-orange-50, html.theme-hc .bg-orange-100,
html.theme-hc [class*="bg-orange-"][class*="/"],
html.theme-hc [class*="bg-indigo-"][class*="/"] {
  background-color: rgba(255,255,255,0.08) !important;
}

/* ────────────────────────────────────────────────── */
/*  GRADIENTES SÓLIDOS → BRANCO (CTAs, botões)       */
/*  Aplica APENAS a gradientes sem opacidade.         */
/* ────────────────────────────────────────────────── */
html.theme-hc [class*="bg-gradient"][class*="from-[#FF6B6B]"],
html.theme-hc [class*="bg-gradient"][class*="from-[#A855F7]"],
html.theme-hc [class*="bg-gradient"][class*="from-[#FF6B9D]"],
html.theme-hc [class*="bg-gradient"][class*="from-red-"],
html.theme-hc [class*="bg-gradient"][class*="from-purple-"],
html.theme-hc [class*="bg-gradient"][class*="from-amber-"],
html.theme-hc [class*="bg-gradient"][class*="from-emerald-"] {
  background: #fff !important;
  color: #000 !important;
}

/* Gradientes purple com opacidade → highlight sutil (não é seleção de marca) */
html.theme-hc [class*="bg-gradient"][class*="from-[#A855F7]/"] {
  background: rgba(255,255,255,0.15) !important;
  color: inherit !important;
}

/* Inline style gradients (ex: DownloadProgressModal) */
html.theme-hc [style*="linear-gradient"] {
  background: #fff !important;
  color: #000 !important;
}

/* ────────────────────────────────────────────────── */
/*  BORDAS DE MARCA → BRANCO (indicador de seleção)  */
/*  A borda branca é o sinal principal de que algo    */
/*  está selecionado no modo alto contraste.          */
/* ────────────────────────────────────────────────── */
html.theme-hc [class*="border-[#FF6B6B]"],
html.theme-hc [class*="border-[#FF9F43]"] {
  border-color: #fff !important;
}

/* ────────────────────────────────────────────────── */
/*  BORDAS SEMÂNTICAS COLORIDAS → CINZA              */
/* ────────────────────────────────────────────────── */
html.theme-hc [class*="border-[#A855F7]"],
html.theme-hc [class*="border-[#FF6B9D]"],
html.theme-hc [class*="border-red-"],
html.theme-hc [class*="border-green-"],
html.theme-hc [class*="border-emerald-"],
html.theme-hc [class*="border-yellow-"],
html.theme-hc [class*="border-blue-"],
html.theme-hc [class*="border-purple-"],
html.theme-hc [class*="border-orange-"] {
  border-color: #666 !important;
}
/* Amber borders → branco (indicador de seleção em CS variações) */
html.theme-hc [class*="border-amber-"] {
  border-color: #fff !important;
}

/* Preservar border-t-transparent (spinners) */
html.theme-hc .border-t-transparent { border-top-color: transparent !important; }

/* Bordas neutras → mais visíveis */
html.theme-hc [class*="border-neutral-"],
html.theme-hc [class*="border-zinc-"],
html.theme-hc [class*="border-white/"] {
  border-color: #555 !important;
}

/* ────────────────────────────────────────────────── */
/*  RINGS COLORIDOS → BRANCO                         */
/* ────────────────────────────────────────────────── */
/* Rings de marca → branco forte (reforça seleção) */
html.theme-hc [class*="ring-[#FF6B6B]"],
html.theme-hc [class*="ring-[#FF9F43]"] {
  --tw-ring-color: rgba(255,255,255,0.6) !important;
}

/* Rings semânticos → cinza */
html.theme-hc [class*="ring-red-"],
html.theme-hc [class*="ring-green-"],
html.theme-hc [class*="ring-emerald-"],
html.theme-hc [class*="ring-blue-"],
html.theme-hc [class*="ring-purple-"] {
  --tw-ring-color: rgba(255,255,255,0.3) !important;
}
/* Amber rings → branco forte (seleção CS variações) */
html.theme-hc [class*="ring-amber-"] {
  --tw-ring-color: rgba(255,255,255,0.6) !important;
}

/* ────────────────────────────────────────────────── */
/*  TEXTOS SECUNDÁRIOS → MAIOR CONTRASTE             */
/* ────────────────────────────────────────────────── */
html.theme-hc [class*="text-neutral-4"],
html.theme-hc [class*="text-neutral-5"],
html.theme-hc [class*="text-neutral-6"],
html.theme-hc [class*="text-zinc-4"],
html.theme-hc [class*="text-zinc-5"],
html.theme-hc [class*="text-gray-4"],
html.theme-hc [class*="text-gray-5"] {
  color: #d4d4d4 !important;
}

/* ────────────────────────────────────────────────── */
/*  INLINE STYLE COLORS (slot accent, dinâmicos)     */
/* ────────────────────────────────────────────────── */
html.theme-hc [style*="#22c55e"],
html.theme-hc [style*="#3b82f6"],
html.theme-hc [style*="#8b5cf6"] {
  color: #fff !important;
  border-color: #666 !important;
  background-color: #555 !important;
}

html.theme-hc [style*="#FF6B6B"],
html.theme-hc [style*="#FF9F43"] {
  color: #fff !important;
  border-color: #666 !important;
}

/* ────────────────────────────────────────────────── */
/*  OPACIDADES BAIXAS → MÍNIMO 80%                   */
/* ────────────────────────────────────────────────── */
html.theme-hc .opacity-40 { opacity: 0.8 !important; }
html.theme-hc .opacity-50 { opacity: 0.8 !important; }
html.theme-hc .opacity-60 { opacity: 0.85 !important; }

/* ────────────────────────────────────────────────── */
/*  FOCUS RING — 3px branco                          */
/* ────────────────────────────────────────────────── */
html.theme-hc *:focus-visible {
  outline: 3px solid #fff !important;
  outline-offset: 2px;
}

/* ────────────────────────────────────────────────── */
/*  SHADOWS → removidas (estilo noir limpo)          */
/* ────────────────────────────────────────────────── */
html.theme-hc [class*="shadow-"] {
  box-shadow: none !important;
}

/* ────────────────────────────────────────────────── */
/*  ANIMAÇÕES REDUZIDAS (acessibilidade)             */
/* ────────────────────────────────────────────────── */
html.theme-hc *,
html.theme-hc *::before,
html.theme-hc *::after {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.05s !important;
}

/* ────────────────────────────────────────────────── */
/*  SCROLLBAR                                        */
/* ────────────────────────────────────────────────── */
html.theme-hc ::-webkit-scrollbar-thumb {
  background: #666;
}
html.theme-hc ::-webkit-scrollbar-thumb:hover {
  background: #888;
}

/* Respeitar preferência de redução de movimento do SO (todos os temas) */
@media (prefers-reduced-motion: reduce) {
  .animate-loading,
  .animate-fade-in,
  .animate-slide-up {
    animation: none !important;
  }
}

/* ═══════════════════════════════════════════════════════════════ */
/* TEMA V2 — Clean & Minimal (variante light com cores frias)     */
/* Background cream (#F7F5F2) → cinza frio (#F9FAFB)             */
/* Sidebar (#EFEBE6) → branco puro (#FFFFFF)                     */
/* ═══════════════════════════════════════════════════════════════ */

/* Background principal */
html.theme-v2 .bg-cream,
html.theme-v2 [class*="bg-[#f7f5f2]"] {
  background-color: #F9FAFB !important;
}

/* Body + root background */
html.theme-v2,
html.theme-v2 body {
  background-color: #F9FAFB !important;
}

/* Sidebar e cards secundários */
html.theme-v2 [class*="bg-[#efebe6]"] {
  background-color: #FFFFFF !important;
}

/* Bordas sidebar/dividers — tom mais frio */
html.theme-v2 [class*="border-[#e5e6ea]"] {
  border-color: #E5E7EB !important;
}

/* Texto sidebar — mais frio */
html.theme-v2 [class*="text-[#373632]"] {
  color: #111827 !important;
}

/* bg-white/80 cards → branco puro no V2 */
html.theme-v2 [class*="bg-white/8"] {
  background-color: #FFFFFF !important;
}

/* bg-white/60 → usa cor neutra fria (exceto sidebar active que é via JS) */
html.theme-v2 [class*="bg-white/6"] {
  background-color: rgba(255,255,255,0.8) !important;
}

/* bg-white/40 hover → hover frio sutil */
html.theme-v2 [class*="bg-white/4"] {
  background-color: rgba(243,244,246,0.6) !important;
}

/* Fonte serif → DM Serif Display no V2 */
html.theme-v2 .font-serif {
  font-family: 'DM Serif Display', Georgia, serif !important;
}

/* ── TEXTOS — subir contraste (cada nível +2 shades) ── */

/* gray-300 → gray-500 (#6B7280) — setas, ícones sutis */
html.theme-v2 [class*="text-gray-3"] {
  color: #6B7280 !important;
}

/* gray-400 → gray-600 (#4B5563) — labels secundários, placeholders */
html.theme-v2 [class*="text-gray-4"] {
  color: #4B5563 !important;
}

/* gray-500 → gray-700 (#374151) — descrições, subtítulos */
html.theme-v2 [class*="text-gray-5"] {
  color: #374151 !important;
}

/* gray-600 → gray-800 (#1F2937) — corpo de texto */
html.theme-v2 [class*="text-gray-6"] {
  color: #1F2937 !important;
}

/* text-[#373632] com opacidade → sólido escuro */
html.theme-v2 [class*="text-[#373632]/"] {
  color: #111827 !important;
}

/* text-[#1A1A1A] → preto puro */
html.theme-v2 [class*="text-[#1A1A1A]"] {
  color: #030712 !important;
}

/* ── BORDAS — mais definidas ── */

/* border-gray-200 → gray-300 (mais visível) */
html.theme-v2 [class*="border-gray-2"] {
  border-color: #D1D5DB !important;
}

/* border-gray-100 → gray-200 */
html.theme-v2 [class*="border-gray-1"] {
  border-color: #E5E7EB !important;
}

/* ── BACKGROUNDS SUTIS — menos transparência ── */

/* bg-gray-100 → ligeiramente mais escuro */
html.theme-v2 .bg-gray-100 {
  background-color: #F3F4F6 !important;
}

/* bg-gray-50 → branco puro */
html.theme-v2 .bg-gray-50 {
  background-color: #FFFFFF !important;
}

/* ────────────────────────────────────────────────── */

/* Line Clamp */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.line-clamp-1 {
  display: -webkit-box;
  -webkit-line-clamp: 1;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Transitions applied only where needed via Tailwind classes (transition-colors, transition-all, etc.) */

/* Better font rendering */
body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ═══════════════════════════════════════════════════════════════ */
/* MOBILE SCROLL FIXES */
/* ═══════════════════════════════════════════════════════════════ */

/* Previne overscroll bounce (área branca) */
html, body {
  overscroll-behavior: none;
  overflow: hidden;
  height: 100%;
  height: 100dvh; /* Dynamic viewport height - considera barra do navegador */
  background-color: #f7f5f2; /* Cream beige - cor base do app (V2 overridden via .theme-v2) */
}

/* Container principal do app */
#root {
  height: 100%;
  height: 100dvh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

/* Scroll suave e fluido em áreas de scroll */
.overflow-y-auto,
.overflow-auto,
[class*="overflow-y-auto"],
[class*="overflow-auto"] {
  -webkit-overflow-scrolling: touch; /* Scroll fluido no iOS */
  overscroll-behavior: contain; /* Previne propagação do scroll */
  scroll-behavior: smooth;
}

/* Previne scroll do body quando modal está aberto */
body.modal-open {
  overflow: hidden;
  position: fixed;
  width: 100%;
}

/* Melhora performance de scroll */
.scroll-container {
  will-change: scroll-position;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-y: contain;
}

/* Touch action para scroll mais responsivo */
@media (max-width: 768px) {
  .overflow-y-auto,
  .overflow-auto {
    touch-action: pan-y;
  }

  /* Esconde scrollbar no mobile mas mantém funcionalidade */
  .overflow-y-auto::-webkit-scrollbar,
  .overflow-auto::-webkit-scrollbar {
    width: 0;
    display: none;
  }
}

/* Scrollbar hide utility */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

/* ═══════════════════════════════════════════════════════════════ */
/* SAFE AREA UTILITIES (PWA + Browser) */
/* ═══════════════════════════════════════════════════════════════ */

/* Padding top com safe-area para modais fullscreen */
.safe-area-top {
  padding-top: max(1rem, env(safe-area-inset-top, 1rem)) !important;
}

/* Padding bottom com safe-area */
.safe-area-bottom {
  padding-bottom: max(0.5rem, env(safe-area-inset-bottom, 0.5rem)) !important;
}

/* Padding em todos os lados com safe-area */
.safe-area-all {
  padding-top: max(1rem, env(safe-area-inset-top, 1rem)) !important;
  padding-right: max(1rem, env(safe-area-inset-right, 1rem)) !important;
  padding-bottom: max(1rem, env(safe-area-inset-bottom, 1rem)) !important;
  padding-left: max(1rem, env(safe-area-inset-left, 1rem)) !important;
}

/* Para modais que abrem do bottom (bottom sheet) */
.safe-area-bottom-sheet {
  padding-bottom: max(1.5rem, calc(1rem + env(safe-area-inset-bottom, 0px))) !important;
}

/* Margin top com safe-area (para elementos fixed no topo) */
.safe-area-mt {
  margin-top: env(safe-area-inset-top, 0px) !important;
}

/* ═══════════════════════════════════════════════════════════════ */
/* PWA STANDALONE MODE SPECIFIC FIXES */
/* ═══════════════════════════════════════════════════════════════ */

/* Quando em modo PWA standalone (adicionado na tela inicial) */
@media all and (display-mode: standalone) {
  /* Root container no PWA - só precisa do padding-top para status bar */
  /* NÃO adicionar padding-bottom pois o nav fixed já cuida da safe-area */
  #root {
    padding-top: env(safe-area-inset-top, 0px);
    box-sizing: border-box;
  }

  /* Body no PWA - background deve cobrir toda a tela */
  body {
    background-color: #f7f5f2;
  }

  /* Bottom nav no PWA - compacto, apenas safe-area necessária */
  .pwa-bottom-nav {
    bottom: 0 !important;
    /* Apenas o padding da safe-area, sem espaço extra */
    padding-bottom: env(safe-area-inset-bottom, 0px) !important;
  }

  /* Modais fullscreen precisam respeitar safe-area no PWA */
  .fixed.inset-0 {
    top: 0 !important;
    bottom: 0 !important;
  }

  /* Headers de modais no PWA */
  .safe-area-top {
    padding-top: max(1rem, calc(0.5rem + env(safe-area-inset-top, 0px))) !important;
  }

  /* Safe area bottom no PWA */
  .safe-area-bottom {
    padding-bottom: max(0.5rem, calc(0.25rem + env(safe-area-inset-bottom, 0px))) !important;
  }

  /* Bottom sheets no PWA */
  .safe-area-bottom-sheet {
    padding-bottom: max(1.5rem, calc(1rem + env(safe-area-inset-bottom, 0px))) !important;
  }
}

/* iOS Safari standalone mode detection adicional */
@supports (-webkit-touch-callout: none) {
  @media (display-mode: standalone) {
    .pwa-bottom-nav {
      /* Fallback para iOS - apenas safe-area */
      padding-bottom: env(safe-area-inset-bottom, 20px) !important;
    }
  }
}
