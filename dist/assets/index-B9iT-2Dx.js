import{u as Tt,a as ea,j as e,E as ta,Z as aa,s as yt,c as Rt,d as ra,p as sa,e as la,C as na,O as Ze,R as ia,f as oa,_ as da,r as ca}from"./index-BQSr_3cM.js";import{r as o}from"./vendor-react-KfUPlHYY.js";import{R as $t}from"./ReportModal-DIEB58x6.js";import{g as xa,a as ga,R as ua,h as ma,s as St}from"./Resolution4KConfirmModal-BpTR6s-c.js";import"./vendor-supabase-D20mg4W1.js";const mt={front:"Frente",back:"Costas","side-left":"Lateral Esq.","side-right":"Lateral Dir.","45-left":"45° Esq.","45-right":"45° Dir.",top:"Topo",detail:"Detalhe",folded:"Dobrada"},fa={front:"fa-shirt",back:"fa-shirt","side-left":"fa-caret-left","side-right":"fa-caret-right","45-left":"fa-arrow-up-left","45-right":"fa-arrow-up-right",top:"fa-arrow-up",detail:"fa-magnifying-glass-plus",folded:"fa-layer-group"},ba=["Calçados","Tênis","Sandálias","Botas","Sapatos"],ha=["Óculos","Bijuterias","Relógios","Cintos","Bolsas","Acessórios","Bonés","Chapéus","Tiaras","Lenços","Outros Acessórios"],pa=({product:r,session:B,creditsUsed:de,userCredits:dt,onSave:ce,onRegenerate:rt,onDelete:Fe,onBack:a,theme:s="dark"})=>{const[ze,Oe]=o.useState(0),[Te,nt]=o.useState(!1),[ne,v]=o.useState(!1),[te,Ce]=o.useState(!1),[De,xe]=o.useState(!1),[P,be]=o.useState(!1),[Re,$e]=o.useState(null),[E,T]=o.useState("agora"),[Se,st]=o.useState(!0),[Pe,_]=o.useState(!1),{user:O}=Tt(),{showToast:Z}=ea();o.useEffect(()=>{const x=setTimeout(()=>st(!1),2500);return()=>clearTimeout(x)},[]);const[p,R]=o.useState(!1),[S,Ge]=o.useState({x:0,y:0}),Me=o.useRef(null),I=B.images,b=I[ze],D=(()=>{const x=r.category||"";return ba.some(g=>x.toLowerCase().includes(g.toLowerCase()))?"footwear":ha.some(g=>x.toLowerCase().includes(g.toLowerCase()))?"accessory":"clothing"})(),Ye=(()=>{switch(D){case"footwear":return["front","back","top","side-left","detail"];case"accessory":return["front","back","side-left","side-right","detail"];default:return["front","back","detail","folded"]}})();o.useEffect(()=>{const x=()=>{const W=new Date(B.createdAt),h=new Date().getTime()-W.getTime(),H=Math.floor(h/6e4),re=Math.floor(h/36e5);H<1?T("agora"):H===1?T("há 1 minuto"):H<60?T(`há ${H} minutos`):T(re===1?"há 1 hora":`há ${re} horas`)};x();const g=setInterval(x,6e4);return()=>clearInterval(g)},[B.createdAt]);const Le=(()=>{var x,g,W,G,h,H;return(g=(x=r.originalImages)==null?void 0:x.front)!=null&&g.url?r.originalImages.front.url:(G=(W=r.images)==null?void 0:W[0])!=null&&G.url?r.images[0].url:(H=(h=r.images)==null?void 0:h[0])!=null&&H.base64?r.images[0].base64:""})(),A=P?Le:b==null?void 0:b.url,[Xe,pe]=o.useState(null),[qe,ae]=o.useState(null),He=50,J=x=>{ae(null),pe(x.targetTouches[0].clientX)},ge=x=>{ae(x.targetTouches[0].clientX)},U=()=>{if(!Xe||!qe)return;const x=Xe-qe;x>He&&ze<I.length-1&&Oe(g=>g+1),x<-He&&ze>0&&Oe(g=>g-1)},it=x=>{if(!Me.current)return;const g=Me.current.getBoundingClientRect(),W=(x.clientX-g.left)/g.width*100,G=(x.clientY-g.top)/g.height*100;Ge({x:W,y:G})},X=()=>{nt(!0),ce()},z=async()=>{b!=null&&b.url&&await yt(b.url,{filename:`${r.sku}-${b.angle}`,shareTitle:"Vizzu Product Studio",shareText:`${r.name} - ${mt[b.angle]}`})},Ie=async x=>{if(!O||!(b!=null&&b.url))return;const g=await Rt({userId:O.id,userEmail:O.email||"",userName:O.name||O.email||"",generationType:"product-studio",generationId:B.id,productName:r.name,generatedImageUrl:b.url,originalImageUrl:Le||void 0,observation:x});if(g.success)Z("Report enviado! Analisaremos em até 24h.","success");else throw new Error(g.error||"Erro ao enviar report")},ue=()=>{Te?a():($e("back"),v(!0))},Ve=x=>{x&&X(),v(!1),Re==="back"&&a(),$e(null)},ie=()=>{Ce(!1),Fe()},Qe=x=>I.some(g=>g.angle===x),_e=x=>{const g=I.findIndex(W=>W.angle===x);g!==-1&&(Oe(g),be(!1))};return Se?e.jsx("div",{className:"min-h-screen flex items-center justify-center "+(s==="dark"?"bg-black":"bg-gray-50"),children:e.jsx("div",{className:"w-72 h-72",children:e.jsx(ta,{src:"https://lottie.host/c73f7881-d168-4dee-be3a-3c73bd916083/vnLD4LVey6.lottie",loop:!0,autoplay:!0,style:{width:"100%",height:"100%"}})})}):e.jsxs("div",{className:"min-h-screen flex flex-col overflow-y-auto "+(s==="dark"?"bg-black":"bg-gray-50"),children:[e.jsx("div",{className:"bg-gradient-to-r from-[#FF6B6B] to-[#FF9F43] px-4 py-3 sticky top-0 z-40 flex-shrink-0",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:ue,className:"w-9 h-9 rounded-xl bg-white/20 backdrop-blur-sm text-white flex items-center justify-center hover:bg-white/30 transition-all",children:e.jsx("i",{className:"fas fa-arrow-left text-sm"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-white text-sm font-semibold",children:"Resultado"}),e.jsx("p",{className:"text-white/70 text-xs truncate max-w-[150px] md:max-w-none",children:r.name})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-white/20 backdrop-blur-sm rounded-lg",children:[e.jsxs("span",{className:"text-white/80 text-[10px]",children:["-",de]}),e.jsx("i",{className:"fas fa-ticket text-white/80 text-[8px]"})]}),e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-white/20 backdrop-blur-sm rounded-lg",children:[e.jsx("span",{className:"text-white font-semibold text-[10px]",children:dt}),e.jsx("i",{className:"fas fa-coins text-yellow-300 text-[8px]"})]})]})]})}),e.jsx("div",{className:"flex-1 max-w-7xl mx-auto w-full p-4 md:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-4 md:gap-6",children:[e.jsx("div",{className:"lg:col-span-3 flex flex-col",children:e.jsxs("div",{className:(s==="dark"?"bg-neutral-900 border-neutral-800":"bg-white border-gray-200 ")+" rounded-2xl border overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-2 border-b "+(s==="dark"?"border-neutral-800":"border-gray-100"),children:[e.jsx("span",{className:(s==="dark"?"text-neutral-400":"text-gray-500")+" text-[10px] uppercase tracking-wide",children:P?"Imagem Original":"Imagem Gerada"}),e.jsxs("button",{onClick:()=>be(!P),className:"flex items-center gap-2 px-3 py-1.5 rounded-lg text-xs font-medium transition-all "+(s==="dark"?"bg-neutral-800 text-neutral-300 hover:bg-neutral-700":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:[e.jsx("i",{className:"fas "+(P?"fa-wand-magic-sparkles":"fa-image")}),e.jsx("span",{children:P?"Ver Gerada":"Ver Original"})]})]}),e.jsx("div",{ref:Me,className:"relative flex items-center justify-center p-4 md:p-6 min-h-[280px] md:min-h-[400px] cursor-zoom-in overflow-hidden "+(s==="dark"?"bg-neutral-800/50":"bg-gray-100"),onMouseEnter:()=>R(!0),onMouseLeave:()=>R(!1),onMouseMove:it,onClick:()=>xe(!0),onTouchStart:J,onTouchMove:ge,onTouchEnd:U,children:A?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:A,alt:`${r.name} - ${P?"original":b==null?void 0:b.angle}`,className:"max-w-full max-h-[260px] md:max-h-[380px] object-contain rounded-lg transition-opacity duration-200 "+(p?"opacity-0 lg:opacity-0":"opacity-100"),style:{display:p?"none":"block"}}),p&&e.jsx("div",{className:"hidden lg:block absolute inset-0 bg-no-repeat",style:{backgroundImage:`url(${A})`,backgroundPosition:`${S.x}% ${S.y}%`,backgroundSize:"110%"}}),e.jsx("img",{src:A,alt:`${r.name}`,className:"lg:hidden max-w-full max-h-[260px] object-contain rounded-lg "+(p?"":"hidden")}),e.jsx("div",{className:"hidden lg:flex absolute bottom-3 right-3 w-8 h-8 rounded-lg items-center justify-center transition-all pointer-events-none "+(s==="dark"?"bg-black/60 text-white":"bg-white/80 text-gray-700"),children:e.jsx("i",{className:"fas fa-search-plus text-sm"})}),e.jsx("div",{className:"absolute top-3 left-3 px-2 py-1 rounded-lg text-[10px] font-medium "+(P?"bg-neutral-600 text-white":"bg-gradient-to-r from-[#FF6B6B] to-[#FF9F43] text-white"),children:P?"Original":mt[b==null?void 0:b.angle]||"Gerada"})]}):e.jsx("div",{className:"flex flex-col items-center gap-2",children:e.jsx("i",{className:(s==="dark"?"text-neutral-600":"text-gray-400")+" fas fa-image text-3xl"})})}),e.jsxs("div",{className:"px-3 py-3 border-t "+(s==="dark"?"border-neutral-800":"border-gray-100"),children:[e.jsx("p",{className:(s==="dark"?"text-neutral-500":"text-gray-500")+" text-[9px] uppercase tracking-wide mb-2 text-center",children:"Ângulos Gerados"}),e.jsx("div",{className:"flex items-center justify-center gap-1.5 flex-wrap",children:Ye.map(x=>{const g=Qe(x),W=!P&&(b==null?void 0:b.angle)===x;return e.jsxs("button",{onClick:()=>g&&_e(x),disabled:!g,className:"px-3 py-1.5 rounded-lg font-medium text-[11px] transition-all flex items-center gap-1.5 "+(W?"bg-gradient-to-r from-[#FF6B6B] to-[#FF9F43] text-white ":g?s==="dark"?"bg-neutral-800 text-neutral-300 hover:bg-neutral-700":"bg-gray-100 text-gray-600 hover:bg-gray-200":s==="dark"?"bg-neutral-800/50 text-neutral-600 cursor-not-allowed":"bg-gray-50 text-gray-400 cursor-not-allowed"),children:[e.jsx("i",{className:"fas "+fa[x]+" text-[9px]"}),mt[x],!g&&e.jsx("i",{className:"fas fa-lock text-[8px] opacity-50"})]},x)})})]})]})}),e.jsxs("div",{className:"lg:col-span-2 flex flex-col gap-3",children:[e.jsxs("div",{className:(s==="dark"?"bg-neutral-900 border-neutral-800":"bg-white border-gray-200 ")+" rounded-xl border p-3",children:[e.jsxs("h3",{className:(s==="dark"?"text-white":"text-gray-900")+" text-xs font-semibold mb-3 flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-chart-simple text-[#FF6B6B] text-[10px]"}),"Informações"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:(s==="dark"?"bg-neutral-800":"bg-gray-100")+" w-7 h-7 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:(s==="dark"?"text-neutral-400":"text-gray-500")+" fas fa-clock text-[10px]"})}),e.jsxs("div",{children:[e.jsx("p",{className:(s==="dark"?"text-neutral-500":"text-gray-500")+" text-[9px] uppercase tracking-wide",children:"Gerado"}),e.jsx("p",{className:(s==="dark"?"text-white":"text-gray-900")+" text-xs font-medium",children:E})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"bg-green-500/20 w-7 h-7 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"fas fa-check text-green-400 text-[10px]"})}),e.jsxs("div",{children:[e.jsx("p",{className:(s==="dark"?"text-neutral-500":"text-gray-500")+" text-[9px] uppercase tracking-wide",children:"Status"}),e.jsxs("p",{className:"text-green-400 text-xs font-medium",children:[I.length," imagem",I.length>1?"s":""," gerada",I.length>1?"s":""]})]})]})]})]}),e.jsxs("button",{onClick:X,disabled:Te,className:"w-full py-3 rounded-xl font-bold text-sm transition-all flex items-center justify-center gap-2 "+(Te?"bg-green-500/20 text-green-400 border-2 border-green-500/30":"bg-gradient-to-r from-[#FF6B6B] to-[#FF9F43] text-white hover:opacity-90 "),children:[e.jsx("i",{className:"fas "+(Te?"fa-check-circle":"fa-images")}),e.jsx("span",{children:Te?"Imagens Salvas":"Salvar Imagens Criadas"})]}),e.jsxs("div",{className:(s==="dark"?"bg-neutral-900 border-neutral-800":"bg-white border-gray-200 ")+" rounded-xl border p-3",children:[e.jsx("p",{className:(s==="dark"?"text-neutral-500":"text-gray-500")+" text-[9px] uppercase tracking-wide mb-2",children:"Ações Rápidas"}),e.jsxs("div",{className:"grid grid-cols-5 gap-2",children:[e.jsxs("button",{onClick:z,className:(s==="dark"?"bg-neutral-800 hover:bg-neutral-700 border-neutral-700":"bg-gray-50 hover:bg-gray-100 border-gray-200")+" p-2.5 rounded-lg border transition-all flex flex-col items-center gap-1",children:[e.jsx("i",{className:(s==="dark"?"text-neutral-300":"text-gray-600")+" fas fa-download text-sm"}),e.jsx("span",{className:(s==="dark"?"text-neutral-400":"text-gray-500")+" text-[9px]",children:"Baixar"})]}),e.jsxs("button",{onClick:rt,className:(s==="dark"?"bg-neutral-800 hover:bg-neutral-700 border-neutral-700":"bg-gray-50 hover:bg-gray-100 border-gray-200")+" p-2.5 rounded-lg border transition-all flex flex-col items-center gap-1",children:[e.jsx("i",{className:(s==="dark"?"text-neutral-300":"text-gray-600")+" fas fa-rotate text-sm"}),e.jsx("span",{className:(s==="dark"?"text-neutral-400":"text-gray-500")+" text-[9px]",children:"Refazer"})]}),e.jsxs("button",{onClick:()=>xe(!0),className:(s==="dark"?"bg-neutral-800 hover:bg-neutral-700 border-neutral-700":"bg-gray-50 hover:bg-gray-100 border-gray-200")+" p-2.5 rounded-lg border transition-all flex flex-col items-center gap-1",children:[e.jsx("i",{className:(s==="dark"?"text-neutral-300":"text-gray-600")+" fas fa-expand text-sm"}),e.jsx("span",{className:(s==="dark"?"text-neutral-400":"text-gray-500")+" text-[9px]",children:"Ampliar"})]}),e.jsxs("button",{onClick:()=>_(!0),className:(s==="dark"?"bg-amber-500/10 hover:bg-amber-500/20 border-amber-500/30":"bg-amber-50 hover:bg-amber-100 border-amber-200")+" p-2.5 rounded-lg border transition-all flex flex-col items-center gap-1",children:[e.jsx("i",{className:"fas fa-flag text-amber-400 text-sm"}),e.jsx("span",{className:"text-amber-400 text-[9px]",children:"Report"})]}),e.jsxs("button",{onClick:()=>Ce(!0),className:(s==="dark"?"bg-red-500/10 hover:bg-red-500/20 border-red-500/30":"bg-red-50 hover:bg-red-100 border-red-200")+" p-2.5 rounded-lg border transition-all flex flex-col items-center gap-1",children:[e.jsx("i",{className:"fas fa-trash text-red-400 text-sm"}),e.jsx("span",{className:"text-red-400 text-[9px]",children:"Excluir"})]})]})]})]})]})}),De&&e.jsxs("div",{className:"fixed inset-0 z-50 flex flex-col bg-black/95",onClick:()=>xe(!1),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 flex-shrink-0",style:{paddingTop:"max(1rem, env(safe-area-inset-top, 1rem))"},onClick:x=>x.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center gap-2 bg-white/10 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>be(!1),className:"px-3 py-1.5 rounded-md text-xs font-medium transition-all "+(P?"text-white/70 hover:text-white":"bg-white text-black"),children:"Gerada"}),e.jsx("button",{onClick:()=>be(!0),className:"px-3 py-1.5 rounded-md text-xs font-medium transition-all "+(P?"bg-white text-black":"text-white/70 hover:text-white"),children:"Original"})]}),e.jsx("button",{onClick:()=>xe(!1),className:"w-10 h-10 rounded-full bg-white/10 text-white flex items-center justify-center hover:bg-white/20",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsx("div",{className:"flex-1 overflow-hidden",onClick:x=>x.stopPropagation(),children:e.jsx(aa,{src:(P?Le:b==null?void 0:b.url)||"",alt:r.name,className:"w-full h-full"})}),!P&&I.length>1&&e.jsx("div",{className:"flex items-center justify-center gap-2 p-4 flex-shrink-0",onClick:x=>x.stopPropagation(),children:I.map((x,g)=>e.jsx("button",{onClick:()=>Oe(g),className:"px-3 py-2 rounded-lg font-medium text-xs transition-all "+(g===ze?"bg-white text-black":"bg-white/10 text-white/70 hover:bg-white/20 hover:text-white"),children:mt[x.angle]||x.angle},x.id||g))})]}),ne&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:()=>v(!1)}),e.jsxs("div",{className:(s==="dark"?"bg-neutral-900 border-neutral-800":"bg-white border-gray-200")+" relative z-10 w-full max-w-sm rounded-2xl border p-5 ",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-500/20 flex items-center justify-center mx-auto mb-3",children:e.jsx("i",{className:"fas fa-exclamation-triangle text-yellow-500 text-xl"})}),e.jsx("h3",{className:(s==="dark"?"text-white":"text-gray-900")+" text-base font-bold font-serif",children:"Sair sem salvar?"}),e.jsx("p",{className:(s==="dark"?"text-neutral-400":"text-gray-500")+" text-xs mt-1",children:"As imagens geradas serão perdidas"})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("button",{onClick:()=>Ve(!0),className:"w-full py-2.5 bg-gradient-to-r from-[#FF6B6B] to-[#FF9F43] text-white rounded-xl font-semibold text-sm hover:opacity-90",children:[e.jsx("i",{className:"fas fa-images mr-2"}),"Salvar e Sair"]}),e.jsx("button",{onClick:()=>Ve(!1),className:(s==="dark"?"bg-neutral-800 text-neutral-300 hover:bg-neutral-700":"bg-gray-100 text-gray-700 hover:bg-gray-200")+" w-full py-2.5 rounded-xl font-semibold text-sm",children:"Sair sem Salvar"}),e.jsx("button",{onClick:()=>v(!1),className:(s==="dark"?"text-neutral-500":"text-gray-500")+" w-full py-2 text-xs font-medium",children:"Cancelar"})]})]})]}),e.jsx($t,{isOpen:Pe,onClose:()=>_(!1),onSubmit:Ie,generationType:"product-studio",productName:r.name,theme:s}),te&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:()=>Ce(!1)}),e.jsxs("div",{className:(s==="dark"?"bg-neutral-900 border-neutral-800":"bg-white border-gray-200")+" relative z-10 w-full max-w-sm rounded-2xl border p-5 ",children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/20 flex items-center justify-center mx-auto mb-3",children:e.jsx("i",{className:"fas fa-trash text-red-500 text-xl"})}),e.jsx("h3",{className:(s==="dark"?"text-white":"text-gray-900")+" text-base font-bold font-serif",children:"Descartar imagens?"}),e.jsx("p",{className:(s==="dark"?"text-neutral-400":"text-gray-500")+" text-xs mt-1",children:"Esta ação não pode ser desfeita"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>Ce(!1),className:(s==="dark"?"bg-neutral-800 text-white hover:bg-neutral-700":"bg-gray-100 text-gray-700 hover:bg-gray-200")+" flex-1 py-2.5 rounded-xl font-semibold text-sm",children:"Cancelar"}),e.jsxs("button",{onClick:ie,className:"flex-1 py-2.5 bg-red-500 text-white rounded-xl font-semibold text-sm hover:bg-red-600",children:[e.jsx("i",{className:"fas fa-trash mr-2"}),"Excluir"]})]})]})]})]})},jt="vizzu-pending-product-studio",It=r=>{try{localStorage.setItem(jt,JSON.stringify(r))}catch(B){console.error("Erro ao salvar geração pendente PS:",B)}},At=()=>{try{const r=localStorage.getItem(jt);if(r)return JSON.parse(r)}catch(r){console.error("Erro ao ler geração pendente PS:",r)}return null},at=()=>{try{localStorage.removeItem(jt)}catch(r){console.error("Erro ao limpar geração pendente PS:",r)}},Et=["Preparando o estúdio fotográfico...","Ajustando a iluminação perfeita...","Posicionando o produto...","Renderizando em alta qualidade...","Aplicando acabamentos profissionais...","Criando fundo neutro de estúdio...","Processando texturas e detalhes...","Otimizando sombras e reflexos...","Finalizando a composição...","Quase pronto! Últimos ajustes..."],ya=["Camisetas","Blusas","Regatas","Tops","Camisas","Bodies","Jaquetas","Casacos","Blazers","Moletons","Calças","Shorts","Bermudas","Saias","Leggings","Vestidos","Macacões","Jardineiras","Biquínis","Maiôs","Shorts Fitness"],ja=["Calçados","Tênis","Sandálias","Botas","Sapatos","Chinelos"],wa=["Bonés","Chapéus","Gorros","Viseiras"],Na=["Bolsas","Mochilas","Pochetes","Necessaires"],ka={clothing:[{id:"front",label:"Frente",icon:"fa-shirt"},{id:"back",label:"Costas",icon:"fa-shirt"},{id:"detail",label:"Detalhe",icon:"fa-magnifying-glass-plus"},{id:"folded",label:"Dobrada",icon:"fa-layer-group"}],footwear:[{id:"front",label:"Frente",icon:"fa-shoe-prints"},{id:"back",label:"Traseira",icon:"fa-shoe-prints"},{id:"top",label:"Vista Superior",icon:"fa-arrow-up"},{id:"side-left",label:"Lateral",icon:"fa-arrows-left-right"},{id:"detail",label:"Sola",icon:"fa-arrow-down"}],headwear:[{id:"front",label:"Frente",icon:"fa-hat-cowboy"},{id:"back",label:"Traseira",icon:"fa-hat-cowboy"},{id:"side-left",label:"Lateral",icon:"fa-arrows-left-right"},{id:"top",label:"Vista Superior",icon:"fa-arrow-up"}],bag:[{id:"front",label:"Frente",icon:"fa-bag-shopping"},{id:"back",label:"Traseira",icon:"fa-bag-shopping"},{id:"side-left",label:"Lateral",icon:"fa-arrows-left-right"},{id:"detail",label:"Interior",icon:"fa-magnifying-glass-plus"}],accessory:[{id:"front",label:"Frente",icon:"fa-glasses"},{id:"back",label:"Trás",icon:"fa-glasses"},{id:"side-left",label:"Lateral Esq.",icon:"fa-caret-left"},{id:"side-right",label:"Lateral Dir.",icon:"fa-caret-right"},{id:"detail",label:"Detalhe",icon:"fa-magnifying-glass-plus"}]},va=["Camisetas","Calças","Calçados","Acessórios","Vestidos","Shorts","Jaquetas","Blusas","Regatas","Tops","Tênis","Sandálias","Botas","Óculos","Bijuterias","Bolsas"],Fa=["Preto","Branco","Azul","Vermelho","Verde","Amarelo","Rosa","Cinza","Marrom","Bege","Laranja","Roxo","Nude","Estampado","Multicolor"],Ca=({product:r,userCredits:B,onUpdateProduct:de,onDeductCredits:dt,onAddHistoryLog:ce,onBack:rt,onCheckCredits:Fe,theme:a="dark",userId:s,isGenerating:ze=!1,isMinimized:Oe=!1,generationProgress:Te=0,generationText:nt="",onSetGenerating:ne,onSetMinimized:v,onSetProgress:te,onSetLoadingText:Ce,isAnyGenerationRunning:De=!1,onNavigate:xe,currentPlan:P,onOpenPlanModal:be})=>{const[Re,$e]=o.useState(!1),[E,T]=o.useState({name:r.name,sku:r.sku,category:r.category||"",color:r.color||"",description:r.description||""}),[Se,st]=o.useState(r.attributes||{}),[Pe,_]=o.useState(0),[O,Z]=o.useState("original"),[p,R]=o.useState(["front"]),[S,Ge]=o.useState("ghost-mannequin"),[Me,I]=o.useState(!1),[b,Y]=o.useState(null),[D,he]=o.useState("natural"),[Ye,K]=o.useState(!1),[Le,A]=o.useState(0),[Xe,pe]=o.useState(""),[qe,ae]=o.useState(0),[He,J]=o.useState(!1),[ge,U]=o.useState(null),[it,X]=o.useState(!1),[z,Ie]=o.useState(null),[ue,Ve]=o.useState(!1),[ie,Qe]=o.useState(()=>xa()),[_e,x]=o.useState(!1),[g,W]=o.useState(!1),G=P?ra(P):!1,[h,H]=o.useState([]),[re,Ke]=o.useState(null),[ct,me]=o.useState(!1),[xt,Je]=o.useState({}),[l,u]=o.useState(null),[w,Q]=o.useState(!1),[ye,et]=o.useState(null),fe=o.useRef(null),[M,Ue]=o.useState(null),{user:We}=Tt(),se=ne?ze:Ye,Ae=te?Te:Le,ft=Ce?nt:Xe,bt=o.useCallback(async()=>{const t=At();if(!t||!s)return"polling";if((Date.now()-t.startTime)/1e3/60>10)return at(),fe.current="failed",Ke("failed"),"completed";try{if(t.generationId){const N=await sa(t.generationId);N.completedAngles.length>0&&H(N.completedAngles);const $=t.angles.length,ee=N.completedAngles.filter(V=>V.status==="completed").length,we=te||A;if(ee>0){const V=Math.round(ee/$*95);we(Math.max(V,15))}else{const V=Date.now()-t.startTime,f=Math.min(Math.round(10+V/12e4*40),50);we(f)}if(N.generationStatus==="completed"||N.generationStatus==="partial"||N.generationStatus==="failed"){fe.current=N.generationStatus,Ke(N.generationStatus),Ue(t.generationId||null),at();const V=N.completedAngles.filter(f=>f.status==="completed");if(V.length>0){const f=V.map((oe,tt)=>({id:oe.id||`${t.generationId}-${tt}`,url:oe.url,angle:oe.angle||"front",createdAt:new Date().toISOString()})),k=t.generationId,Ne={id:k,productId:r.id,images:f,status:"ready",createdAt:new Date().toISOString()},ke=r.generatedImages||{studioReady:[],cenarioCriativo:[],modeloIA:[],productStudio:[]};de(r.id,{generatedImages:{...ke,productStudio:[...ke.productStudio||[],Ne]}});const Be=`vizzu_bg_notified_${s}`,ve=JSON.parse(localStorage.getItem(Be)||"[]");ve.push(`ps-${k}`),localStorage.setItem(Be,JSON.stringify(ve.slice(-200))),U(Ne),N.generationStatus==="completed"&&J(!0)}return"completed"}return"polling"}const{data:i,error:d}=await la.from("generations").select("id, status, output_urls").eq("user_id",s).eq("product_id",t.productId).order("created_at",{ascending:!1}).limit(1).single();if(d||!i||!(i.output_urls&&(Array.isArray(i.output_urls)?i.output_urls.length>0:!0)))return"polling";at();const m=i.output_urls,y=(Array.isArray(m)?m:[]).map((N,$)=>({id:N.id||`${i.id}-${$}`,url:N.url,angle:N.angle||"front",createdAt:new Date().toISOString()}));if(y.length===0)return"polling";const j={id:i.id,productId:r.id,images:y,status:"ready",createdAt:new Date().toISOString()},C=r.generatedImages||{studioReady:[],cenarioCriativo:[],modeloIA:[],productStudio:[]};de(r.id,{generatedImages:{...C,productStudio:[...C.productStudio||[],j]}});const q=`vizzu_bg_notified_${s}`,F=JSON.parse(localStorage.getItem(q)||"[]");return F.push(`ps-${i.id}`),localStorage.setItem(q,JSON.stringify(F.slice(-200))),U(j),J(!0),"completed"}catch(i){return console.error("[Polling] Erro ao consultar Supabase:",i),"polling"}},[s,r.id]);o.useEffect(()=>{var c;const t=At();if(!t||!s||t.productId!==r.id)return;const n=ne||K,i=te||A;n(!0),i(10),((c=t.angles)==null?void 0:c.length)>0&&R(t.angles);const d=setInterval(async()=>{await bt()==="completed"&&(clearInterval(d),i(100),setTimeout(()=>{n(!1),i(0),v&&v(!1)},1e3))},3e3);return()=>{clearInterval(d)}},[s,r.id]),o.useEffect(()=>{if(!se)return;const t=setInterval(()=>{ae(n=>(n+1)%Et.length)},3e3);return()=>clearInterval(t)},[se]),o.useEffect(()=>{se&&(Ce||pe)(Et[qe])},[qe,se,Ce]);const le=(()=>{const t=E.category||r.category||"";return ya.includes(t)?"clothing":ja.includes(t)?"footwear":wa.includes(t)?"headwear":Na.includes(t)?"bag":"accessory"})(),gt=ka[le],je=o.useMemo(()=>{var n,i,d,c,m,y,j,C,q,F,N,$,ee,we,V,f,k,Ne;const t=[];return(i=(n=r.originalImages)==null?void 0:n.front)!=null&&i.url&&t.push({url:r.originalImages.front.url,type:"Frente"}),(c=(d=r.originalImages)==null?void 0:d.back)!=null&&c.url&&t.push({url:r.originalImages.back.url,type:"Costas"}),(y=(m=r.originalImages)==null?void 0:m["side-left"])!=null&&y.url&&t.push({url:r.originalImages["side-left"].url,type:"Lateral Esq."}),(C=(j=r.originalImages)==null?void 0:j["side-right"])!=null&&C.url&&t.push({url:r.originalImages["side-right"].url,type:"Lateral Dir."}),(F=(q=r.originalImages)==null?void 0:q.top)!=null&&F.url&&t.push({url:r.originalImages.top.url,type:"Cima"}),($=(N=r.originalImages)==null?void 0:N.frontDetail)!=null&&$.url&&t.push({url:r.originalImages.frontDetail.url,type:"Detalhe Frente"}),(we=(ee=r.originalImages)==null?void 0:ee.backDetail)!=null&&we.url&&t.push({url:r.originalImages.backDetail.url,type:"Detalhe Costas"}),(f=(V=r.originalImages)==null?void 0:V.detail)!=null&&f.url&&!((Ne=(k=r.originalImages)==null?void 0:k.frontDetail)!=null&&Ne.url)&&t.push({url:r.originalImages.detail.url,type:"Detalhe"}),t.length===0&&r.images&&r.images.forEach((ke,Be)=>{const ve=ke.url||ke.base64;ve&&t.push({url:ve,type:`Foto ${Be+1}`})}),t},[r]),L=o.useMemo(()=>{var i;const t=[];return(((i=r.generatedImages)==null?void 0:i.productStudio)||[]).forEach(d=>{d.images.forEach(c=>{t.push({url:c.url,angle:c.angle,sessionId:d.id})})}),t},[r]);o.useMemo(()=>{const t=L.find(n=>n.angle==="front");if(t)return{url:t.url,type:"Gerada - Frente",isGenerated:!0};if(L.length>0){const n={front:"Frente",back:"Costas","side-left":"Lateral Esq.","side-right":"Lateral Dir.","45-left":"45° Esq.","45-right":"45° Dir.",top:"Cima",detail:"Detalhe"};return{url:L[0].url,type:`Gerada - ${n[L[0].angle]||L[0].angle}`,isGenerated:!0}}return je.length>0?{url:je[0].url,type:je[0].type,isGenerated:!1}:null},[L,je]);const ut=L.length>0;o.useEffect(()=>{Z(ut?"otimizada":"original"),_(0)},[ut]);const wt=o.useMemo(()=>{var n,i,d,c,m,y,j,C,q,F,N,$,ee,we,V,f,k,Ne,ke,Be,ve,oe,tt,Ct;const t={front:!1,back:!1,"side-left":!1,"side-right":!1,"45-left":!1,"45-right":!1,top:!1,detail:!1,folded:!1};return(i=(n=r.originalImages)==null?void 0:n.front)!=null&&i.id&&(t.front=!0),(c=(d=r.originalImages)==null?void 0:d.back)!=null&&c.id&&(t.back=!0),(y=(m=r.originalImages)==null?void 0:m["side-left"])!=null&&y.id&&(t["side-left"]=!0),(C=(j=r.originalImages)==null?void 0:j["side-right"])!=null&&C.id&&(t["side-right"]=!0),(F=(q=r.originalImages)==null?void 0:q.top)!=null&&F.id&&(t.top=!0),(($=(N=r.originalImages)==null?void 0:N.detail)!=null&&$.id||(we=(ee=r.originalImages)==null?void 0:ee.frontDetail)!=null&&we.id||(f=(V=r.originalImages)==null?void 0:V.backDetail)!=null&&f.id)&&(t.detail=!0),(Ne=(k=r.originalImages)==null?void 0:k["45-left"])!=null&&Ne.id&&(t["45-left"]=!0),(Be=(ke=r.originalImages)==null?void 0:ke["45-right"])!=null&&Be.id&&(t["45-right"]=!0),!t.front&&((oe=(ve=r.images)==null?void 0:ve[0])!=null&&oe.id)&&(t.front=!0),!t.back&&((Ct=(tt=r.images)==null?void 0:tt[1])!=null&&Ct.id)&&(t.back=!0),t},[r]),Nt={front:"Frente",back:"Costas","side-left":"Lateral Esquerda","side-right":"Lateral Direita","45-left":"45° Esquerda","45-right":"45° Direita",top:"Vista de Cima",detail:"Detalhe",folded:"Dobrada"},kt=t=>t*1*ia[ie],Ee=kt(p.length),Pt=t=>{if(t==="4k"&&!ma()){W(!0),x(!0);return}Qe(t),St(t)},_t=()=>{Qe("4k"),St("4k"),x(!1),W(!1)},zt=()=>{x(!1),W(!1)},Ot=()=>{be&&be()},Dt=t=>{if(t!=="front"){if(p.includes(t)){R(n=>n.filter(i=>i!==t));return}if(t!=="folded"&&!wt[t]){Ie(t),X(!0);return}R(n=>[...n,t])}},Gt=()=>{R(gt.map(t=>t.id))},Mt=()=>{R(["front"])},ot=na[E.category]||[],Lt=()=>{de(r.id,{name:E.name,sku:E.sku,category:E.category,color:E.color,description:E.description,attributes:Se}),$e(!1)},qt=()=>{T({name:r.name,sku:r.sku,category:r.category||"",color:r.color||"",description:r.description||""}),st(r.attributes||{}),$e(!1)},Vt=()=>{v&&v(!0)},Kt=()=>{J(!1),U(null)},Jt=()=>{ge&&R(ge.images.map(t=>t.angle)),J(!1),U(null)},Ut=()=>{if(!ge)return;const t=r.generatedImages||{studioReady:[],cenarioCriativo:[],modeloIA:[],productStudio:[]},n=(t.productStudio||[]).filter(i=>i.id!==ge.id);de(r.id,{generatedImages:{...t,productStudio:n}}),ce&&ce("Product Studio",`Excluído ${ge.images.length} fotos de "${r.name}"`,"success",[r],"manual",0),J(!1),U(null)},Wt=()=>{J(!1),U(null)},vt=()=>{if(O==="otimizada"&&L.length>0){const t=Math.min(Pe,L.length-1);return L[t]}return null},Ft=async t=>{const n=vt();if(n)try{if(t==="jpeg"){const i=document.createElement("canvas"),d=i.getContext("2d"),c=new Image;c.crossOrigin="anonymous",await new Promise((y,j)=>{c.onload=y,c.onerror=j,c.src=n.url}),i.width=c.width,i.height=c.height,d==null||d.drawImage(c,0,0);const m=i.toDataURL("image/jpeg",.95);await yt(m,{filename:`${r.sku}_${n.angle}.jpg`,shareTitle:"Vizzu Product Studio",shareText:`${r.name}`})}else await yt(n.url,{filename:`${r.sku}_${n.angle}.png`,shareTitle:"Vizzu Product Studio",shareText:`${r.name}`})}catch{window.open(n.url,"_blank")}},ht=t=>{var n;if(xe){const i=vt();xe(t,r.id,(i==null?void 0:i.url)||((n=L[0])==null?void 0:n.url))}},Zt=async t=>{if(!(!z||!s)){Ve(!0);try{const n=new FormData;n.append("file",t),n.append("product_id",r.id),n.append("user_id",s),n.append("angle",z);const i=`${s}/${r.id}/original_${z}_${Date.now()}.${t.name.split(".").pop()}`,{createClient:d}=await da(async()=>{const{createClient:F}=await import("./vendor-supabase-D20mg4W1.js");return{createClient:F}},[]),c=d("https://dbdqiqehuapcicejnzyd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRiZHFpcWVodWFwY2ljZWpuenlkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzY5NjkwNTAsImV4cCI6MjA1MjU0NTA1MH0.gHFzWFLKHrNsRNB-8P8R1WKp_c__-Ft5NfvkwHPF_Ns"),{error:m}=await c.storage.from("products").upload(i,t,{upsert:!0});if(m)throw m;const y=`https://dbdqiqehuapcicejnzyd.supabase.co/storage/v1/object/public/products/${i}`,{data:j,error:C}=await c.from("product_images").insert({product_id:r.id,user_id:s,type:"original",angle:z,storage_path:i,url:y,file_name:t.name,mime_type:t.type,is_primary:!1}).select().single();if(C)throw C;const q={...r.originalImages,[z]:{id:j.id,url:y,storagePath:i}};de(r.id,{originalImages:q}),X(!1),R(F=>[...F,z]),Ie(null)}catch(n){console.error("Erro ao fazer upload:",n),alert("Erro ao adicionar imagem de referência. Tente novamente.")}finally{Ve(!1)}}},pt=o.useCallback(()=>{const t=Date.now(),n=5*60*1e3,i=setInterval(async()=>{if(Date.now()-t>n){console.warn("[Studio] Polling timeout — parando após 5 minutos"),clearInterval(i),at(),Ke("failed");const c=ne||K,m=te||A;c(!1),m(0),v&&v(!1);return}if(await bt()==="completed"){clearInterval(i);const c=ne||K,m=te||A;m(100),fe.current==="partial"||fe.current==="failed"?me(!1):setTimeout(()=>{c(!1),m(0),v&&v(!1)},1e3)}},3e3);return i},[bt,ne,v,te]),Yt=async()=>{var c,m,y,j,C,q,F,N,$,ee,we,V;if(p.length===0||ct)return;if(me(!0),De){me(!1),alert("Aguarde a geração atual terminar antes de iniciar uma nova.");return}if(Fe&&!Fe(Ee,"studio")){me(!1);return}const t={},n=f=>{if(f&&f.id)return f.id};if(t.front=n((c=r.originalImages)==null?void 0:c.front)||n((m=r.images)==null?void 0:m[0]),t.back=n((y=r.originalImages)==null?void 0:y.back)||n((j=r.images)==null?void 0:j[1]),t["side-left"]=n((C=r.originalImages)==null?void 0:C["side-left"]),t["side-right"]=n((q=r.originalImages)==null?void 0:q["side-right"]),t.top=n((F=r.originalImages)==null?void 0:F.top),t.detail=n((N=r.originalImages)==null?void 0:N.detail),t.front_detail=n(($=r.originalImages)==null?void 0:$.frontDetail),t.back_detail=n((ee=r.originalImages)==null?void 0:ee.backDetail),t["45-left"]=n((we=r.originalImages)==null?void 0:we["45-left"]),t["45-right"]=n((V=r.originalImages)==null?void 0:V["45-right"]),!t.front||!s){me(!1),alert("Erro: Imagem frontal ou usuário não encontrado.");return}const i=ne||K,d=te||A;i(!0),d(5),ae(0),H([]),Ke(null),fe.current=null,Je({}),u(null),Ue(null),It({productId:r.id,productName:r.name,userId:s,startTime:Date.now(),angles:p});try{const f={};t.back&&(f.back=t.back),t["side-left"]&&(f["side-left"]=t["side-left"]),t["side-right"]&&(f["side-right"]=t["side-right"]),t["45-left"]&&(f["45-left"]=t["45-left"]),t["45-right"]&&(f["45-right"]=t["45-right"]),t.top&&(f.top=t.top),t.detail&&(f.detail=t.detail),t.front_detail&&(f.front_detail=t.front_detail),t.back_detail&&(f.back_detail=t.back_detail);const k=await oa({productId:r.id,userId:s,imageId:t.front,referenceImages:Object.keys(f).length>0?f:void 0,angles:p,presentationStyle:le==="clothing"?S:"flat-lay",fabricFinish:(le==="clothing"?S:"flat-lay")==="flat-lay"?D:"natural",productInfo:{name:r.name,category:r.category||E.category,description:r.description||E.description},resolution:ie});if(k.success&&k.generation_id&&k.status==="processing"){console.log("[Studio v9] Resposta imediata! generation_id:",k.generation_id),It({productId:r.id,productName:r.name,userId:s,startTime:Date.now(),angles:p,generationId:k.generation_id}),d(10),pt(),ce&&ce("Product Studio",`Geração iniciada: ${p.length} fotos de "${r.name}"`,"success",[r],"ai",k.credits_used||Ee);return}if(k._serverTimeout){console.warn("[Studio v8] Webhook timeout — iniciando polling fallback"),pt();return}if(at(),!k.success||!k.results)throw new Error(k.message||"Erro ao gerar imagens");d(95);const Ne=k.results.map(oe=>({id:oe.id,url:oe.url,angle:oe.angle,createdAt:new Date().toISOString()}));d(100),ce&&ce("Product Studio",`Gerado ${p.length} fotos profissionais de "${r.name}"`,"success",[r],"ai",k.credits_used||Ee);const ke=k.generation_id||`session-${Date.now()}`,Be={id:ke,productId:r.id,images:Ne,status:"ready",createdAt:new Date().toISOString()},ve=r.generatedImages||{studioReady:[],cenarioCriativo:[],modeloIA:[],productStudio:[]};if(de(r.id,{generatedImages:{...ve,productStudio:[...ve.productStudio||[],Be]}}),s){const oe=`vizzu_bg_notified_${s}`,tt=JSON.parse(localStorage.getItem(oe)||"[]");tt.push(`ps-${ke}`),localStorage.setItem(oe,JSON.stringify(tt.slice(-200)))}U(Be),J(!0),R(["front"]),me(!1),i(!1),d(0),v&&v(!1)}catch(f){const k=f instanceof Error?f.message:"";k.includes("Failed to fetch")||k.includes("Load failed")||k.includes("NetworkError")||k.includes("AbortError")?(console.warn("[Studio] Rede interrompida — iniciando polling fallback"),pt()):(at(),console.error("Erro ao gerar imagens:",f),alert(`Erro ao gerar imagens: ${f instanceof Error?f.message:"Erro desconhecido"}`),ce&&ce("Product Studio",`Erro ao gerar fotos de "${r.name}": ${f instanceof Error?f.message:"Erro desconhecido"}`,"error",[r],"ai",0),me(!1),i(!1),d(0),v&&v(!1))}},Xt=async t=>{const n=h.find(i=>i.angle==="front"&&i.status==="completed");if(!(!(n!=null&&n.url)||!s||!M)){u(t);try{const i=await ca({productId:r.id,userId:s,angle:t,generationId:M,frontStudioUrl:n.url,presentationStyle:le==="clothing"?S:"flat-lay",fabricFinish:(le==="clothing"?S:"flat-lay")==="flat-lay"?D:"natural",productInfo:{name:r.name,category:r.category||E.category,description:r.description||E.description},resolution:ie});i.success&&i.url?H(d=>d.map(c=>c.angle===t?{...c,status:"completed",url:i.url,id:i.id}:c)):Je(d=>({...d,[t]:(d[t]||0)+1}))}catch{Je(i=>({...i,[t]:(i[t]||0)+1}))}finally{u(null)}}};o.useEffect(()=>{if(!re||re==="processing"||re==="completed"||h.length===0)return;if(h.every(n=>n.status==="completed")){fe.current="completed",Ke("completed");const n=h.filter(c=>c.status==="completed"&&c.url).map((c,m)=>({id:c.id||`${M}-${m}`,url:c.url,angle:c.angle||"front",createdAt:new Date().toISOString()}));if(n.length>0&&M){const c={id:M,productId:r.id,images:n,status:"ready",createdAt:new Date().toISOString()},m=r.generatedImages||{studioReady:[],cenarioCriativo:[],modeloIA:[],productStudio:[]},y=(m.productStudio||[]).findIndex(C=>C.id===M),j=[...m.productStudio||[]];y>=0?j[y]=c:j.push(c),de(r.id,{generatedImages:{...m,productStudio:j}}),U(c)}const i=ne||K,d=te||A;setTimeout(()=>{J(!0),i(!1),d(0),v&&v(!1)},1e3)}},[h,re]);const Ht=async t=>{var d,c;if(!We||!ye||!M)return;const n=h.find(m=>m.angle==="front"&&m.status==="completed"),i=await Rt({userId:We.id,userEmail:We.email||"",userName:We.name||We.email||"",generationType:"product-studio",generationId:M,productName:r.name,generatedImageUrl:(n==null?void 0:n.url)||((c=(d=r.images)==null?void 0:d[0])==null?void 0:c.url)||"",observation:`[Ângulo: ${ye}] ${t}`});if(!i.success)throw new Error(i.error||"Erro ao enviar report")},Qt=()=>{const t=h.filter(d=>d.status==="completed"&&d.url);if(t.length>0&&M){const d=t.map((C,q)=>({id:C.id||`${M}-retry-${q}`,url:C.url,angle:C.angle||"front",createdAt:new Date().toISOString()})),c={id:M,productId:r.id,images:d,status:"ready",createdAt:new Date().toISOString()},m=r.generatedImages||{studioReady:[],cenarioCriativo:[],modeloIA:[],productStudio:[]},y=(m.productStudio||[]).findIndex(C=>C.id===M),j=[...m.productStudio||[]];y>=0?j[y]=c:j.push(c),de(r.id,{generatedImages:{...m,productStudio:j}}),U(c),J(!0)}const n=ne||K,i=te||A;n(!1),i(0),v&&v(!1),Je({}),u(null),me(!1)};return He&&ge?e.jsx(pa,{product:r,session:ge,creditsUsed:kt(ge.images.length),userCredits:B,onSave:Kt,onRegenerate:Jt,onDelete:Ut,onBack:Wt,theme:a}):e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 "+(a==="dark"?"bg-black":"bg-gray-50"),children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:rt,className:(a==="dark"?"bg-neutral-800 text-neutral-400 hover:text-white hover:bg-neutral-700":"bg-white text-gray-500 hover:text-gray-700 hover:bg-gray-100 ")+" w-10 h-10 rounded-xl flex items-center justify-center transition-all",children:e.jsx("i",{className:"fas fa-arrow-left"})}),e.jsxs("div",{children:[e.jsx("h1",{className:(a==="dark"?"text-white":"text-gray-900")+" text-lg font-extrabold",children:"Product Studio"}),e.jsx("p",{className:(a==="dark"?"text-neutral-500":"text-gray-500")+" text-xs font-serif italic",children:r.name})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg "+(a==="dark"?"bg-neutral-900 border border-neutral-800":"bg-white border border-gray-200 "),children:[e.jsx("i",{className:"fas fa-coins text-xs "+(a==="dark"?"text-neutral-400":"text-gray-500")}),e.jsx("span",{className:(a==="dark"?"text-white":"text-gray-900")+" font-medium text-sm",children:B})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:(a==="dark"?"bg-neutral-900 border-neutral-800":"bg-white border-gray-200 ")+" rounded-xl border overflow-hidden",children:[ut&&e.jsxs("div",{className:"flex items-center justify-center gap-1 p-3 border-b "+(a==="dark"?"border-neutral-800 bg-neutral-900":"border-gray-100 bg-gray-50"),children:[e.jsxs("button",{onClick:()=>{Z("original"),_(0)},className:"px-4 py-2 rounded-lg text-xs font-medium transition-all "+(O==="original"?a==="dark"?"bg-white/10 text-white border border-white/15":"bg-gray-900 text-white":a==="dark"?"text-neutral-400 hover:text-white hover:bg-neutral-800":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"),children:[e.jsx("i",{className:"fas fa-image mr-1.5"}),"Original",je.length>0&&e.jsxs("span",{className:"ml-1.5 opacity-70",children:["(",je.length,")"]})]}),e.jsxs("button",{onClick:()=>{Z("otimizada"),_(0)},className:"px-4 py-2 rounded-lg text-xs font-medium transition-all "+(O==="otimizada"?a==="dark"?"bg-white/10 text-white border border-white/15":"bg-gray-900 text-white":a==="dark"?"text-neutral-400 hover:text-white hover:bg-neutral-800":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"),children:[e.jsx("i",{className:"fas fa-sparkles mr-1.5"}),"Otimizada",e.jsxs("span",{className:"ml-1.5 opacity-70",children:["(",L.length,")"]})]})]}),(()=>{const t=O==="otimizada"?L:je,n=Math.min(Pe,Math.max(0,t.length-1)),i=t[n];return e.jsx("div",{className:"relative flex items-center justify-center p-4 min-h-[300px] max-h-[500px] "+(a==="dark"?"bg-neutral-800/50":"bg-gray-100"),children:i?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:i.url,alt:r.name,className:"max-w-full max-h-[450px] object-contain rounded-lg"}),e.jsx("div",{className:"absolute top-3 left-3 px-2 py-1 bg-black/50 backdrop-blur-sm rounded-lg",children:e.jsx("span",{className:"text-white text-xs font-medium capitalize",children:O==="otimizada"?i.angle:i.type})}),t.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>_(d=>d===0?t.length-1:d-1),className:"absolute left-3 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-black/50 backdrop-blur-sm text-white flex items-center justify-center hover:bg-black/70 transition-colors",children:e.jsx("i",{className:"fas fa-chevron-left"})}),e.jsx("button",{onClick:()=>_(d=>d===t.length-1?0:d+1),className:"absolute right-3 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-black/50 backdrop-blur-sm text-white flex items-center justify-center hover:bg-black/70 transition-colors",children:e.jsx("i",{className:"fas fa-chevron-right"})}),e.jsx("div",{className:"absolute bottom-3 left-1/2 -translate-x-1/2 flex gap-1.5",children:t.map((d,c)=>e.jsx("button",{onClick:()=>_(c),className:`w-2 h-2 rounded-full transition-all ${c===n?"bg-white w-4":"bg-white/50"}`},c))})]})]}):e.jsxs("div",{className:"w-full h-64 flex flex-col items-center justify-center gap-2",children:[e.jsx("i",{className:(a==="dark"?"text-neutral-600":"text-gray-400")+" fas fa-image text-4xl"}),e.jsx("p",{className:(a==="dark"?"text-neutral-500":"text-gray-400")+" text-sm",children:O==="otimizada"?"Nenhuma foto otimizada ainda":"Nenhuma foto original"})]})})})(),(()=>{const t=O==="otimizada"?L:je,n=Math.min(Pe,Math.max(0,t.length-1));return t.length<=1?null:e.jsx("div",{className:"flex gap-2 p-3 border-t overflow-x-auto "+(a==="dark"?"border-neutral-800":"border-gray-100"),children:t.map((i,d)=>e.jsx("button",{onClick:()=>_(d),className:`w-14 h-14 rounded-lg overflow-hidden border-2 transition-all flex-shrink-0 ${d===n?a==="dark"?"border-white/40":"border-gray-900":a==="dark"?"border-neutral-700":"border-gray-200"}`,children:e.jsx(Ze,{src:i.url,alt:"",className:"w-full h-full object-cover",size:"thumb"})},d))})})()]}),e.jsxs("div",{className:(a==="dark"?"bg-neutral-900 border-neutral-800":"bg-white border-gray-200 ")+" rounded-xl border p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:(a==="dark"?"text-white":"text-gray-900")+" text-sm font-semibold",children:[e.jsx("i",{className:"fas fa-info-circle mr-2 "+(a==="dark"?"text-neutral-400":"text-gray-500")}),"Informações do Produto"]}),Re?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:qt,className:(a==="dark"?"text-neutral-400 hover:text-white":"text-gray-500 hover:text-gray-700")+" text-xs font-medium",children:"Cancelar"}),e.jsx("button",{onClick:Lt,className:(a==="dark"?"text-neutral-400 hover:text-white":"text-gray-500 hover:text-gray-700")+" text-xs font-medium hover:underline",children:"Salvar"})]}):e.jsxs("button",{onClick:()=>$e(!0),className:(a==="dark"?"text-neutral-400 hover:text-white":"text-gray-500 hover:text-gray-700")+" text-xs font-medium hover:underline",children:[e.jsx("i",{className:"fas fa-pen mr-1"}),"Editar"]})]}),Re?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:(a==="dark"?"text-neutral-500":"text-gray-500")+" text-[10px] uppercase tracking-wide block mb-1",children:"Nome"}),e.jsx("input",{type:"text",value:E.name,onChange:t=>T(n=>({...n,name:t.target.value})),className:(a==="dark"?"bg-neutral-800 border-neutral-700 text-white":"bg-gray-50 border-gray-200 text-gray-900")+" w-full px-3 py-2 border rounded-lg text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:(a==="dark"?"text-neutral-500":"text-gray-500")+" text-[10px] uppercase tracking-wide block mb-1",children:"SKU"}),e.jsx("input",{type:"text",value:E.sku,onChange:t=>T(n=>({...n,sku:t.target.value})),className:(a==="dark"?"bg-neutral-800 border-neutral-700 text-white":"bg-gray-50 border-gray-200 text-gray-900")+" w-full px-3 py-2 border rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:(a==="dark"?"text-neutral-500":"text-gray-500")+" text-[10px] uppercase tracking-wide block mb-1",children:"Categoria"}),e.jsxs("select",{value:E.category,onChange:t=>T(n=>({...n,category:t.target.value})),className:(a==="dark"?"bg-neutral-800 border-neutral-700 text-white":"bg-gray-50 border-gray-200 text-gray-900")+" w-full px-3 py-2 border rounded-lg text-sm",children:[e.jsx("option",{value:"",children:"Selecione"}),va.map(t=>e.jsx("option",{value:t,children:t},t))]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:(a==="dark"?"text-neutral-500":"text-gray-500")+" text-[10px] uppercase tracking-wide block mb-1",children:"Cor"}),e.jsxs("select",{value:E.color,onChange:t=>T(n=>({...n,color:t.target.value})),className:(a==="dark"?"bg-neutral-800 border-neutral-700 text-white":"bg-gray-50 border-gray-200 text-gray-900")+" w-full px-3 py-2 border rounded-lg text-sm",children:[e.jsx("option",{value:"",children:"Selecione"}),Fa.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),ot.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:(a==="dark"?"text-neutral-500":"text-gray-500")+" text-[10px] uppercase tracking-wide block mb-1",children:ot[0].label}),e.jsxs("select",{value:Se[ot[0].id]||"",onChange:t=>st(n=>({...n,[ot[0].id]:t.target.value})),className:(a==="dark"?"bg-neutral-800 border-neutral-700 text-white":"bg-gray-50 border-gray-200 text-gray-900")+" w-full px-3 py-2 border rounded-lg text-sm",children:[e.jsx("option",{value:"",children:"Selecione"}),ot[0].options.map(t=>e.jsx("option",{value:t.id,children:t.label},t.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:(a==="dark"?"text-neutral-500":"text-gray-500")+" text-[10px] uppercase tracking-wide block mb-1",children:"Descrição"}),e.jsx("textarea",{value:E.description,onChange:t=>T(n=>({...n,description:t.target.value})),rows:2,className:(a==="dark"?"bg-neutral-800 border-neutral-700 text-white":"bg-gray-50 border-gray-200 text-gray-900")+" w-full px-3 py-2 border rounded-lg text-sm resize-none"})]})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:(a==="dark"?"text-neutral-500":"text-gray-500")+" text-[10px] uppercase tracking-wide",children:"Nome"}),e.jsx("p",{className:(a==="dark"?"text-white":"text-gray-900")+" text-sm font-medium",children:r.name})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:(a==="dark"?"text-neutral-500":"text-gray-500")+" text-[10px] uppercase tracking-wide",children:"SKU"}),e.jsx("p",{className:(a==="dark"?"text-white":"text-gray-900")+" text-sm",children:r.sku})]}),e.jsxs("div",{children:[e.jsx("p",{className:(a==="dark"?"text-neutral-500":"text-gray-500")+" text-[10px] uppercase tracking-wide",children:"Categoria"}),e.jsx("p",{className:(a==="dark"?"text-white":"text-gray-900")+" text-sm",children:r.category||"-"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:(a==="dark"?"text-neutral-500":"text-gray-500")+" text-[10px] uppercase tracking-wide",children:"Cor"}),e.jsx("p",{className:(a==="dark"?"text-white":"text-gray-900")+" text-sm",children:r.color||"-"})]}),r.attributes&&Object.keys(r.attributes).length>0&&e.jsxs("div",{children:[e.jsx("p",{className:(a==="dark"?"text-neutral-500":"text-gray-500")+" text-[10px] uppercase tracking-wide",children:"Caimento"}),e.jsx("p",{className:(a==="dark"?"text-white":"text-gray-900")+" text-sm",children:r.attributes.caimento||"-"})]})]}),r.description&&e.jsxs("div",{children:[e.jsx("p",{className:(a==="dark"?"text-neutral-500":"text-gray-500")+" text-[10px] uppercase tracking-wide",children:"Descrição"}),e.jsx("p",{className:(a==="dark"?"text-neutral-300":"text-gray-700")+" text-xs",children:r.description})]})]})]}),ut&&e.jsxs("div",{className:(a==="dark"?"bg-neutral-900 border-neutral-800":"bg-white border-gray-200 ")+" rounded-xl border p-4",children:[e.jsxs("h3",{className:(a==="dark"?"text-white":"text-gray-900")+" text-sm font-semibold mb-3",children:[e.jsx("i",{className:"fas fa-magic mr-2 "+(a==="dark"?"text-neutral-400":"text-gray-500")}),"Usar Imagem Otimizada"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>ht("look-composer"),disabled:!xe,className:(a==="dark"?"bg-white/5 border-white/10 hover:border-white/20":"bg-white/60 border-gray-200/60 hover:border-gray-300")+" p-3 rounded-xl border transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed backdrop-blur-xl",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 backdrop-blur-xl "+(a==="dark"?"bg-white/10 border border-white/15":"bg-white/60 border border-gray-200/60 shadow-sm"),children:e.jsx("i",{className:"fas fa-layer-group text-xs "+(a==="dark"?"text-neutral-200":"text-[#1A1A1A]")})}),e.jsx("span",{className:(a==="dark"?"text-white":"text-gray-900")+" text-xs font-medium",children:"Montar Look"})]}),e.jsxs("button",{onClick:()=>ht("lifestyle"),disabled:!xe,className:(a==="dark"?"bg-white/5 border-white/10 hover:border-white/20":"bg-white/60 border-gray-200/60 hover:border-gray-300")+" p-3 rounded-xl border transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed backdrop-blur-xl",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 backdrop-blur-xl "+(a==="dark"?"bg-white/10 border border-white/15":"bg-white/60 border border-gray-200/60 shadow-sm"),children:e.jsx("i",{className:"fas fa-mountain-sun text-xs "+(a==="dark"?"text-neutral-200":"text-[#1A1A1A]")})}),e.jsx("span",{className:(a==="dark"?"text-white":"text-gray-900")+" text-xs font-medium",children:"Cenário Criativo"})]}),e.jsxs("button",{onClick:()=>ht("provador"),disabled:!xe,className:(a==="dark"?"bg-white/5 border-white/10 hover:border-white/20":"bg-white/60 border-gray-200/60 hover:border-gray-300")+" p-3 rounded-xl border transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed backdrop-blur-xl",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 backdrop-blur-xl "+(a==="dark"?"bg-white/10 border border-white/15":"bg-white/60 border border-gray-200/60 shadow-sm"),children:e.jsx("i",{className:"fas fa-user-check text-xs "+(a==="dark"?"text-neutral-200":"text-[#1A1A1A]")})}),e.jsx("span",{className:(a==="dark"?"text-white":"text-gray-900")+" text-xs font-medium",children:"Vestir Cliente"})]}),e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{className:(a==="dark"?"bg-white/5 border-white/10 hover:border-white/20":"bg-white/60 border-gray-200/60 hover:border-gray-300")+" w-full p-3 rounded-xl border transition-all flex items-center gap-2 backdrop-blur-xl",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0 backdrop-blur-xl "+(a==="dark"?"bg-white/10 border border-white/15":"bg-white/60 border border-gray-200/60 shadow-sm"),children:e.jsx("i",{className:"fas fa-download text-xs "+(a==="dark"?"text-neutral-200":"text-[#1A1A1A]")})}),e.jsx("span",{className:(a==="dark"?"text-white":"text-gray-900")+" text-xs font-medium",children:"Download"}),e.jsx("i",{className:(a==="dark"?"text-neutral-500":"text-gray-400")+" fas fa-chevron-down text-[8px] ml-auto"})]}),e.jsxs("div",{className:(a==="dark"?"bg-neutral-800 border-neutral-700":"bg-white border-gray-200 ")+" absolute bottom-full left-0 right-0 mb-1 rounded-lg border overflow-hidden opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-10",children:[e.jsxs("button",{onClick:()=>Ft("png"),className:(a==="dark"?"hover:bg-neutral-700 text-white":"hover:bg-gray-50 text-gray-900")+" w-full px-3 py-2 text-xs text-left flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-file-image "+(a==="dark"?"text-neutral-400":"text-gray-500")}),"PNG (Alta qualidade)"]}),e.jsxs("button",{onClick:()=>Ft("jpeg"),className:(a==="dark"?"hover:bg-neutral-700 text-white border-t border-neutral-700":"hover:bg-gray-50 text-gray-900 border-t border-gray-100")+" w-full px-3 py-2 text-xs text-left flex items-center gap-2",children:[e.jsx("i",{className:"fas fa-file-image "+(a==="dark"?"text-neutral-400":"text-gray-500")}),"JPEG (Arquivo menor)"]})]})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:(a==="dark"?"bg-white/5 border-white/10":"bg-gray-50 border-gray-200")+" rounded-xl p-4 border",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:(a==="dark"?"bg-white/10":"bg-gray-200")+" w-10 h-10 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:(a==="dark"?"text-neutral-300":"text-gray-600")+" fas "+(le==="footwear"?"fa-shoe-prints":le==="headwear"?"fa-hat-cowboy":le==="bag"?"fa-bag-shopping":le==="accessory"?"fa-glasses":"fa-shirt")})}),e.jsxs("div",{children:[e.jsx("p",{className:(a==="dark"?"text-white":"text-gray-900")+" text-sm font-medium",children:le==="footwear"?"Calçado":le==="headwear"?"Acessório de Cabeça":le==="bag"?"Bolsa/Mochila":le==="accessory"?"Acessório":"Roupa"}),e.jsxs("p",{className:(a==="dark"?"text-neutral-400":"text-gray-600")+" text-xs",children:[gt.length," ângulos disponíveis"]})]})]})}),e.jsxs("div",{className:(a==="dark"?"bg-neutral-900 border-neutral-800":"bg-white border-gray-200 ")+" rounded-xl border p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:(a==="dark"?"text-white":"text-gray-900")+" text-sm font-semibold",children:[e.jsx("i",{className:"fas fa-camera mr-2 "+(a==="dark"?"text-neutral-400":"text-gray-500")}),"Selecione os Ângulos"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:Gt,className:(a==="dark"?"text-neutral-400 hover:text-white":"text-gray-500 hover:text-gray-700")+" text-[10px] font-medium",children:"Todos"}),e.jsx("span",{className:a==="dark"?"text-neutral-600":"text-gray-300",children:"|"}),e.jsx("button",{onClick:Mt,className:(a==="dark"?"text-neutral-400 hover:text-white":"text-gray-500 hover:text-gray-700")+" text-[10px] font-medium",children:"Limpar"})]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:gt.map(t=>{const n=p.includes(t.id),i=t.id==="front",d=i||t.id==="folded"||wt[t.id];return e.jsxs("button",{onClick:()=>Dt(t.id),className:"p-4 rounded-xl border-2 transition-all flex flex-col items-center gap-2 relative "+(i||n?a==="dark"?"bg-white/10 border-white/30 text-white":"bg-gray-100 border-gray-900 text-gray-900":a==="dark"?"bg-neutral-800 border-neutral-700 text-neutral-400 hover:border-neutral-600":"bg-gray-50 border-gray-200 text-gray-500 hover:border-gray-300"),children:[!i&&!d&&e.jsx("div",{className:`absolute top-2 right-2 w-5 h-5 rounded-full flex items-center justify-center text-[10px] ${a==="dark"?"bg-amber-500/20 text-amber-400":"bg-amber-100 text-amber-500"}`,children:e.jsx("i",{className:"fas fa-exclamation"})}),e.jsx("i",{className:`fas ${t.icon} text-xl`}),e.jsx("span",{className:"text-xs font-medium",children:t.label}),(i||n)&&e.jsx("i",{className:"fas fa-check-circle text-green-400 text-sm"}),!i&&!d&&!n&&e.jsx("span",{className:(a==="dark"?"text-neutral-500":"text-gray-400")+" text-[10px]",children:"Sem ref."})]},t.id)})}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 pt-3 border-t border-neutral-800/50",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-green-500/20 flex items-center justify-center",children:e.jsx("i",{className:"fas fa-check text-green-400 text-[8px]"})}),e.jsx("span",{className:(a==="dark"?"text-neutral-500":"text-gray-500")+" text-[10px]",children:"Com referência"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-4 h-4 rounded-full flex items-center justify-center "+(a==="dark"?"bg-amber-500/20":"bg-amber-100"),children:e.jsx("i",{className:"fas fa-exclamation text-[8px] "+(a==="dark"?"text-amber-400":"text-amber-500")})}),e.jsx("span",{className:(a==="dark"?"text-neutral-500":"text-gray-500")+" text-[10px]",children:"Sem referência"})]})]})]}),le==="clothing"&&e.jsxs("div",{className:(a==="dark"?"bg-neutral-900 border-neutral-800":"bg-white border-gray-200 ")+" rounded-xl border p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:(a==="dark"?"text-white":"text-gray-900")+" text-sm font-semibold",children:[e.jsx("i",{className:"fas fa-tshirt mr-2 "+(a==="dark"?"text-neutral-400":"text-gray-500")}),"Estilo de Apresentação"]}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>I(!Me),onBlur:()=>setTimeout(()=>I(!1),200),className:(a==="dark"?"text-neutral-400 hover:text-white bg-neutral-800 hover:bg-neutral-700":"text-gray-500 hover:text-gray-700 bg-gray-100 hover:bg-gray-200")+" w-6 h-6 rounded-full flex items-center justify-center transition-all",children:e.jsx("i",{className:"fas fa-question text-[10px]"})}),Me&&e.jsxs("div",{className:(a==="dark"?"bg-neutral-800 border-neutral-700":"bg-white border-gray-200 ")+" absolute right-0 top-8 w-80 rounded-xl border p-4 z-20",children:[e.jsx("p",{className:(a==="dark"?"text-neutral-400":"text-gray-600")+" text-xs text-center mb-3",children:"Exemplos de cada estilo:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative rounded-lg overflow-hidden border-2 mb-2 cursor-pointer transition-all hover:scale-105 "+(a==="dark"?"border-neutral-500":"border-gray-300"),onClick:t=>{t.stopPropagation(),Y({url:"https://dbdqiqehuapcicejnzyd.supabase.co/storage/v1/object/public/products/314df8ec-687f-44d6-bc11-f00f0bab2bde/e587218a-950f-43f6-8de4-ff65e6c4608d/studio_front_ghost_2K_27315fcf-1e7c-481f-a9e6-c9ff9db9bfd4.png",label:"Ghost Mannequin"})},children:[e.jsx(Ze,{src:"https://dbdqiqehuapcicejnzyd.supabase.co/storage/v1/object/public/products/314df8ec-687f-44d6-bc11-f00f0bab2bde/e587218a-950f-43f6-8de4-ff65e6c4608d/studio_front_ghost_2K_27315fcf-1e7c-481f-a9e6-c9ff9db9bfd4.png",alt:"Ghost Mannequin",className:"w-full h-32 object-cover",size:"thumb"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity bg-black/30",children:e.jsx("i",{className:"fas fa-search-plus text-white text-lg"})})]}),e.jsx("span",{className:"text-neutral-400 text-xs font-semibold",children:"Ghost Mannequin"}),e.jsx("p",{className:(a==="dark"?"text-neutral-500":"text-gray-500")+" text-[10px] mt-1",children:"Vestido em corpo invisível"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative rounded-lg overflow-hidden border-2 mb-2 cursor-pointer transition-all hover:scale-105 "+(a==="dark"?"border-blue-500/50":"border-blue-300"),onClick:t=>{t.stopPropagation(),Y({url:"https://dbdqiqehuapcicejnzyd.supabase.co/storage/v1/object/public/products/314df8ec-687f-44d6-bc11-f00f0bab2bde/e587218a-950f-43f6-8de4-ff65e6c4608d/studio_front_flatlay_2K_38960141-980e-47f2-b84b-848d21da7430.png",label:"Flat Lay"})},children:[e.jsx(Ze,{src:"https://dbdqiqehuapcicejnzyd.supabase.co/storage/v1/object/public/products/314df8ec-687f-44d6-bc11-f00f0bab2bde/e587218a-950f-43f6-8de4-ff65e6c4608d/studio_front_flatlay_2K_38960141-980e-47f2-b84b-848d21da7430.png",alt:"Flat Lay",className:"w-full h-32 object-cover",size:"thumb"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity bg-black/30",children:e.jsx("i",{className:"fas fa-search-plus text-white text-lg"})})]}),e.jsx("span",{className:"text-blue-400 text-xs font-semibold",children:"Flat Lay"}),e.jsx("p",{className:(a==="dark"?"text-neutral-500":"text-gray-500")+" text-[10px] mt-1",children:"Deitado, vista de cima"})]})]}),e.jsxs("p",{className:(a==="dark"?"text-neutral-500":"text-gray-400")+" text-[10px] text-center mt-3",children:[e.jsx("i",{className:"fas fa-search-plus mr-1"}),"Clique nas imagens para ampliar"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("button",{onClick:()=>Ge("ghost-mannequin"),className:"p-4 rounded-xl border-2 transition-all flex flex-col items-center gap-2 "+(S==="ghost-mannequin"?"bg-gradient-to-r from-[#FF6B6B]/15 to-[#FF9F43]/15 border-[#FF9F43]":a==="dark"?"bg-neutral-800 border-neutral-700 hover:border-neutral-600":"bg-gray-50 border-gray-200 hover:border-gray-300"),children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center "+(S==="ghost-mannequin"?"bg-gradient-to-r from-[#FF6B6B] to-[#FF9F43]":a==="dark"?"bg-neutral-700":"bg-gray-200"),children:e.jsx("i",{className:"fas fa-person text-xl "+(S==="ghost-mannequin"?"text-white":a==="dark"?"text-neutral-400":"text-gray-500")})}),e.jsx("span",{className:(S==="ghost-mannequin"?a==="dark"?"text-neutral-200":"text-gray-700":a==="dark"?"text-neutral-400":"text-gray-600")+" text-xs font-medium",children:"Ghost Mannequin"}),S==="ghost-mannequin"&&e.jsx("i",{className:"fas fa-check-circle text-green-400 text-sm"})]}),e.jsxs("button",{onClick:()=>Ge("flat-lay"),className:"p-4 rounded-xl border-2 transition-all flex flex-col items-center gap-2 "+(S==="flat-lay"?"bg-gradient-to-r from-[#FF6B6B]/15 to-[#FF9F43]/15 border-[#FF9F43]":a==="dark"?"bg-neutral-800 border-neutral-700 hover:border-neutral-600":"bg-gray-50 border-gray-200 hover:border-gray-300"),children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center "+(S==="flat-lay"?"bg-gradient-to-r from-[#FF6B6B] to-[#FF9F43]":a==="dark"?"bg-neutral-700":"bg-gray-200"),children:e.jsx("i",{className:"fas fa-shirt text-xl "+(S==="flat-lay"?"text-white":a==="dark"?"text-neutral-400":"text-gray-500")})}),e.jsx("span",{className:(S==="flat-lay"?a==="dark"?"text-neutral-200":"text-gray-700":a==="dark"?"text-neutral-400":"text-gray-600")+" text-xs font-medium",children:"Flat Lay"}),S==="flat-lay"&&e.jsx("i",{className:"fas fa-check-circle text-green-400 text-sm"})]})]}),S==="flat-lay"&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("h4",{className:(a==="dark"?"text-neutral-300":"text-gray-700")+" text-xs font-semibold mb-2",children:[e.jsx("i",{className:"fas fa-wand-magic-sparkles mr-1.5 "+(a==="dark"?"text-neutral-400":"text-gray-500")}),"Acabamento do Tecido"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:()=>he("natural"),className:"p-3 rounded-lg border-2 transition-all flex flex-col items-center gap-1.5 "+(D==="natural"?"bg-gradient-to-r from-[#FF6B6B]/10 to-[#FF9F43]/10 border-[#FF9F43]":a==="dark"?"bg-neutral-800 border-neutral-700 hover:border-neutral-600":"bg-gray-50 border-gray-200 hover:border-gray-300"),children:[e.jsx("div",{className:"w-9 h-9 rounded-lg flex items-center justify-center "+(D==="natural"?"bg-gradient-to-r from-[#FF6B6B] to-[#FF9F43]":a==="dark"?"bg-neutral-700":"bg-gray-200"),children:e.jsx("i",{className:"fas fa-leaf text-base "+(D==="natural"?"text-white":a==="dark"?"text-neutral-400":"text-gray-500")})}),e.jsx("span",{className:(D==="natural"?a==="dark"?"text-neutral-200":"text-gray-700":a==="dark"?"text-neutral-400":"text-gray-600")+" text-[11px] font-medium",children:"Natural"}),e.jsx("p",{className:(a==="dark"?"text-neutral-500":"text-gray-400")+" text-[9px] leading-tight text-center",children:"Rugas e textura realistas"}),D==="natural"&&e.jsx("i",{className:"fas fa-check-circle text-green-400 text-xs"})]}),e.jsxs("button",{onClick:()=>he("pressed"),className:"p-3 rounded-lg border-2 transition-all flex flex-col items-center gap-1.5 "+(D==="pressed"?"bg-gradient-to-r from-[#FF6B6B]/10 to-[#FF9F43]/10 border-[#FF9F43]":a==="dark"?"bg-neutral-800 border-neutral-700 hover:border-neutral-600":"bg-gray-50 border-gray-200 hover:border-gray-300"),children:[e.jsx("div",{className:"w-9 h-9 rounded-lg flex items-center justify-center "+(D==="pressed"?"bg-gradient-to-r from-[#FF6B6B] to-[#FF9F43]":a==="dark"?"bg-neutral-700":"bg-gray-200"),children:e.jsx("i",{className:"fas fa-wand-magic-sparkles text-base "+(D==="pressed"?"text-white":a==="dark"?"text-neutral-400":"text-gray-500")})}),e.jsx("span",{className:(D==="pressed"?a==="dark"?"text-neutral-200":"text-gray-700":a==="dark"?"text-neutral-400":"text-gray-600")+" text-[11px] font-medium",children:"Passada"}),e.jsx("p",{className:(a==="dark"?"text-neutral-500":"text-gray-400")+" text-[9px] leading-tight text-center",children:"Lisa e sem rugas"}),D==="pressed"&&e.jsx("i",{className:"fas fa-check-circle text-green-400 text-xs"})]})]})]})]}),e.jsx("div",{className:(a==="dark"?"bg-neutral-900 border-neutral-800":"bg-white border-gray-200 ")+" rounded-xl border p-4",children:e.jsx(ga,{resolution:ie,onChange:Pt,canUse4K:G,onUpgradeClick:Ot,theme:a,disabled:se})}),e.jsxs("div",{className:(a==="dark"?"bg-neutral-900 border-neutral-800":"bg-white border-gray-200 ")+" rounded-xl border p-4",children:[e.jsxs("h3",{className:(a==="dark"?"text-white":"text-gray-900")+" text-sm font-semibold mb-3",children:[e.jsx("i",{className:"fas fa-receipt mr-2 "+(a==="dark"?"text-neutral-400":"text-gray-500")}),"Resumo"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:(a==="dark"?"text-neutral-400":"text-gray-600")+" text-sm",children:"Fotos selecionadas"}),e.jsx("span",{className:(a==="dark"?"text-white":"text-gray-900")+" text-sm font-medium",children:p.length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:(a==="dark"?"text-neutral-400":"text-gray-600")+" text-sm",children:"Resolução"}),e.jsx("span",{className:(a==="dark"?"text-white":"text-gray-900")+" text-sm font-medium",children:ie.toUpperCase()})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:(a==="dark"?"text-neutral-400":"text-gray-600")+" text-sm",children:"Créditos necessários"}),e.jsx("span",{className:(a==="dark"?"text-white":"text-gray-900")+" text-sm font-bold",children:Ee})]}),e.jsx("div",{className:"h-px my-2 "+(a==="dark"?"bg-neutral-800":"bg-gray-200")}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:(a==="dark"?"text-neutral-400":"text-gray-600")+" text-sm",children:"Seus créditos"}),e.jsx("span",{className:(B>=Ee?"text-green-400":"text-red-400")+" text-sm font-bold",children:B})]})]}),e.jsx("div",{className:(a==="dark"?"bg-neutral-800/50":"bg-gray-50")+" rounded-lg p-3 mt-3",children:e.jsxs("p",{className:(a==="dark"?"text-neutral-500":"text-gray-500")+" text-[10px]",children:[e.jsx("i",{className:"fas fa-info-circle mr-1"}),"1 crédito por foto",ie==="4k"?" (x2 para 4K)":"","."]})})]}),e.jsx("button",{onClick:()=>Yt(),disabled:p.length===0||se||ct||B<Ee||De,className:"w-full py-4 rounded-xl font-semibold text-white transition-all flex items-center justify-center gap-2 "+(se?"bg-[#FF9F43] cursor-wait":p.length===0||B<Ee||De?(a==="dark"?"bg-neutral-700":"bg-gray-300")+" cursor-not-allowed opacity-50":"bg-gradient-to-r from-[#FF6B6B] to-[#FF9F43] hover:opacity-90 "),children:se?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin"}),e.jsxs("span",{children:["Gerando... ",Ae,"%"]})]}):De?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-clock"}),e.jsx("span",{children:"Aguardando outra geração..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-wand-magic-sparkles"}),e.jsxs("span",{children:["Criar ",p.length>0?`${p.length} Foto${p.length>1?"s":""}`:"Fotos"]})]})}),B<Ee&&p.length>0&&e.jsxs("p",{className:"text-center text-red-400 text-xs",children:[e.jsx("i",{className:"fas fa-exclamation-triangle mr-1"}),"Créditos insuficientes"]}),L.length>0&&e.jsxs("div",{className:(a==="dark"?"bg-neutral-900 border-neutral-800":"bg-white border-gray-200 ")+" rounded-xl border p-4 mt-4",children:[e.jsxs("h3",{className:(a==="dark"?"text-white":"text-gray-900")+" text-sm font-semibold mb-3",children:[e.jsx("i",{className:"fas fa-sparkles mr-2 text-green-400"}),"Fotos Geradas",e.jsxs("span",{className:(a==="dark"?"text-neutral-500":"text-gray-500")+" text-xs font-normal ml-2",children:["(",L.length,")"]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:L.map((t,n)=>e.jsxs("div",{className:"relative rounded-lg overflow-hidden border "+(a==="dark"?"border-neutral-700 hover:border-green-500/50":"border-gray-200 hover:border-green-300")+" transition-all",children:[e.jsx(Ze,{src:t.url,alt:`${t.angle} view`,className:"w-full aspect-square object-cover",size:"preview"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-2",children:e.jsx("span",{className:"text-white text-[10px] font-medium capitalize",children:t.angle})}),e.jsx("a",{href:t.url,download:`${r.sku}-${t.angle}.png`,target:"_blank",rel:"noopener noreferrer",className:"absolute top-2 right-2 w-6 h-6 bg-black/50 backdrop-blur-sm rounded-full flex items-center justify-center text-white hover:bg-black/70 transition-colors",children:e.jsx("i",{className:"fas fa-download text-[10px]"})})]},`gen-${n}`))})]}),je.length>0&&e.jsxs("div",{className:(a==="dark"?"bg-neutral-900 border-neutral-800":"bg-white border-gray-200 ")+" rounded-xl border p-4 mt-4",children:[e.jsxs("h3",{className:(a==="dark"?"text-white":"text-gray-900")+" text-sm font-semibold mb-3",children:[e.jsx("i",{className:"fas fa-image mr-2 text-neutral-400"}),"Fotos Originais",e.jsxs("span",{className:(a==="dark"?"text-neutral-500":"text-gray-500")+" text-xs font-normal ml-2",children:["(",je.length,")"]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:je.map((t,n)=>e.jsxs("div",{className:"relative rounded-lg overflow-hidden border "+(a==="dark"?"border-neutral-700 hover:border-neutral-500":"border-gray-200 hover:border-gray-400")+" transition-all",children:[e.jsx(Ze,{src:t.url,alt:t.type,className:"w-full aspect-square object-cover",size:"preview"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-2",children:e.jsx("span",{className:"text-white text-[10px] font-medium",children:t.type})})]},`orig-${n}`))})]})]})]})]}),it&&z&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 safe-area-all",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:()=>{X(!1),Ie(null)}}),e.jsxs("div",{className:(a==="dark"?"bg-neutral-900 border-neutral-800":"bg-white border-gray-200")+" relative z-10 w-full max-w-md rounded-2xl border overflow-hidden",children:[e.jsxs("div",{className:"p-6 pb-4 text-center",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full flex items-center justify-center "+(a==="dark"?"bg-amber-500/20":"bg-amber-100"),children:e.jsx("i",{className:"fas fa-image text-2xl "+(a==="dark"?"text-amber-400":"text-amber-500")})}),e.jsx("h3",{className:(a==="dark"?"text-white":"text-gray-900")+" text-lg font-semibold font-serif mb-2",children:"Sem imagem de referência"}),e.jsxs("p",{className:(a==="dark"?"text-neutral-400":"text-gray-600")+" text-sm",children:["O ângulo ",e.jsx("span",{className:(a==="dark"?"text-white":"text-gray-900")+" font-semibold",children:Nt[z]})," não possui foto de referência. A IA vai gerar normalmente, mas o resultado pode não ser tão fiel ao produto real."]})]}),e.jsxs("div",{className:"px-6 pb-4 space-y-3",children:[e.jsxs("button",{onClick:()=>{X(!1),z&&R(t=>[...t,z]),Ie(null)},className:"w-full px-4 py-3 bg-gradient-to-r from-[#FF6B6B] to-[#FF9F43] hover:from-[#FF5555] hover:to-[#FF9F43] text-white rounded-xl font-medium transition-all text-center flex items-center justify-center gap-2",children:[e.jsx("i",{className:"fas fa-check"}),e.jsx("span",{children:"Continuar mesmo assim"})]}),e.jsxs("label",{className:"block",children:[e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:t=>{var i;const n=(i=t.target.files)==null?void 0:i[0];n&&Zt(n)},disabled:ue}),e.jsx("div",{className:`w-full px-4 py-3 rounded-xl font-medium transition-all text-center cursor-pointer flex items-center justify-center gap-2 ${a==="dark"?"bg-neutral-800 hover:bg-neutral-700 text-white":"bg-gray-100 hover:bg-gray-200 text-gray-700"} ${ue?"opacity-50 cursor-wait":""}`,children:ue?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-spinner fa-spin"}),e.jsx("span",{children:"Enviando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fas fa-upload"}),e.jsx("span",{children:"Adicionar foto de referência"})]})})]}),e.jsx("button",{onClick:()=>{X(!1),Ie(null)},disabled:ue,className:(a==="dark"?"text-neutral-500 hover:text-neutral-300":"text-gray-400 hover:text-gray-600")+" w-full px-4 py-2 text-sm transition-all text-center",children:"Cancelar"})]}),e.jsx("div",{className:"px-6 pb-6",children:e.jsxs("div",{className:(a==="dark"?"bg-amber-500/10 border-amber-500/20":"bg-amber-50 border-amber-200")+" flex items-start gap-3 rounded-xl p-3 border",children:[e.jsx("i",{className:"fas fa-lightbulb text-amber-400 mt-0.5"}),e.jsx("p",{className:(a==="dark"?"text-amber-400/80":"text-amber-600")+" text-xs",children:"Com uma foto de referência deste ângulo, a IA reproduz melhor cores, proporções e detalhes do produto."})]})})]})]}),se&&!Oe&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[e.jsx("div",{className:`absolute inset-0 backdrop-blur-2xl ${a==="dark"?"bg-black/80":"bg-white/30"}`}),e.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center max-w-md mx-auto p-6",children:[e.jsx("div",{className:"w-64 h-64 mb-6 rounded-2xl overflow-hidden flex items-center justify-center",children:e.jsx("img",{src:"/Scene-1.gif",alt:"",className:"h-full object-cover",style:{width:"140%",maxWidth:"none"}})}),e.jsx("h2",{className:`text-2xl font-bold font-serif mb-2 text-center ${a==="dark"?"text-white":"text-gray-900"}`,children:"Criando suas fotos..."}),e.jsx("p",{className:`text-sm mb-6 text-center min-h-[20px] transition-all duration-300 ${a==="dark"?"text-neutral-400":"text-gray-500"}`,children:ft}),e.jsxs("div",{className:"w-full max-w-xs mb-4",children:[e.jsx("div",{className:`h-2 rounded-full overflow-hidden ${a==="dark"?"bg-neutral-800":"bg-gray-200"}`,children:e.jsx("div",{className:"h-full bg-gradient-to-r from-[#FF6B6B] to-[#FF9F43] rounded-full transition-all duration-500",style:{width:`${Ae}%`}})}),e.jsxs("p",{className:`text-sm font-medium text-center mt-2 ${a==="dark"?"text-white":"text-gray-900"}`,children:[Ae,"%"]})]}),e.jsxs("div",{className:"w-full max-w-xs mb-6",children:[e.jsx("div",{className:"flex flex-col gap-2",children:p.map((t,n)=>{const i=h.find(F=>F.angle===t),d=(i==null?void 0:i.status)==="completed",c=(i==null?void 0:i.status)==="failed"||re==="failed"&&!i,m=h.length>0;let y=!1;if(m){const F=p.findIndex(N=>{const $=h.find(ee=>ee.angle===N);return!$||$.status!=="completed"&&$.status!=="failed"});y=!d&&!c&&n===F}else{const N=90/p.length,$=n*N,ee=$+N;y=Ae>=$&&Ae<ee}const j=gt.find(F=>F.id===t),C=(j==null?void 0:j.label)||Nt[t]||t,q=(j==null?void 0:j.icon)||"fa-image";return e.jsxs("div",{className:`flex items-center gap-3 px-4 py-3 rounded-xl border transition-all duration-500 ${d?a==="dark"?"bg-green-500/10 border-green-500/30":"bg-green-50 border-green-200":c?a==="dark"?"bg-red-500/10 border-red-500/30":"bg-red-50 border-red-200":y?a==="dark"?"bg-white/10 border-white/20":"bg-white border-gray-300 shadow-sm":a==="dark"?"bg-neutral-900/50 border-neutral-800/50":"bg-gray-50/50 border-gray-200/50"}`,children:[e.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center text-sm transition-all duration-500 ${d?"bg-green-500/20 text-green-400":c?"bg-red-500/20 text-red-400":y?"bg-gradient-to-br from-[#FF6B6B]/20 to-[#FF9F43]/20 text-[#FF9F43]":a==="dark"?"bg-neutral-800 text-neutral-600":"bg-gray-200 text-gray-400"}`,children:e.jsx("i",{className:`fas ${d?"fa-check":c?"fa-times":q}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:`text-sm font-medium transition-all duration-500 ${d?a==="dark"?"text-green-400":"text-green-600":c?a==="dark"?"text-red-400":"text-red-600":y?a==="dark"?"text-white":"text-gray-900":a==="dark"?"text-neutral-600":"text-gray-400"}`,children:C}),c&&e.jsx("p",{className:`text-xs mt-0.5 ${a==="dark"?"text-red-500/70":"text-red-400"}`,children:"Falhou"})]}),d&&(i==null?void 0:i.url)&&e.jsx("img",{src:i.url,alt:C,className:"w-8 h-8 rounded-lg object-cover border border-green-500/30"}),d&&!(i!=null&&i.url)&&e.jsx("i",{className:"fas fa-check-circle text-green-400 text-sm"}),c&&(re&&re!=="processing"?l===t?e.jsx("i",{className:"fas fa-spinner fa-spin text-[#FF9F43] text-sm"}):(xt[t]||0)>=2?e.jsx("button",{onClick:F=>{F.stopPropagation(),et(t),Q(!0)},className:"text-xs font-medium text-amber-400 hover:text-amber-300 whitespace-nowrap",children:"Reportar"}):e.jsx("button",{onClick:F=>{F.stopPropagation(),Xt(t)},className:"text-xs font-medium text-[#FF9F43] hover:text-[#FF6B6B] whitespace-nowrap",children:"Tentar de novo"}):e.jsx("i",{className:"fas fa-exclamation-circle text-red-400 text-sm"})),y&&e.jsx("i",{className:"fas fa-spinner fa-spin text-[#FF9F43] text-sm"})]},t)})}),(()=>{const t=h.filter(i=>i.status==="completed").length,n=h.filter(i=>i.status==="failed").length;return e.jsx("p",{className:`text-xs text-center mt-2 ${a==="dark"?"text-neutral-600":"text-gray-400"}`,children:t>0?`${t} de ${p.length} pronta${t>1?"s":""}${n>0?` • ${n} falha${n>1?"s":""}`:""}`:`${p.length} foto${p.length>1?"s":""} • ${Ee} crédito${Ee>1?"s":""}`})})()]}),re&&re!=="processing"?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:Qt,className:"flex items-center gap-2 px-6 py-3 rounded-xl font-medium transition-all bg-gradient-to-r from-[#FF6B6B] to-[#FF9F43] text-white hover:opacity-90",children:[e.jsx("i",{className:`fas ${h.some(t=>t.status==="completed")?"fa-images":"fa-times"}`}),e.jsx("span",{children:h.some(t=>t.status==="completed")?"Ver resultados":"Fechar"})]}),e.jsx("p",{className:`text-xs mt-2 text-center ${a==="dark"?"text-neutral-500":"text-gray-400"}`,children:"Você pode tentar novamente os ângulos que falharam"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:Vt,className:`flex items-center gap-2 px-6 py-3 rounded-xl font-medium transition-all ${a==="dark"?"bg-neutral-800 hover:bg-neutral-700 text-white":"bg-white/80 hover:bg-white border border-gray-200/60 text-gray-700 shadow-sm"}`,children:[e.jsx("i",{className:"fas fa-minus"}),e.jsx("span",{children:"Minimizar e continuar navegando"})]}),e.jsx("p",{className:`text-xs mt-3 text-center ${a==="dark"?"text-neutral-600":"text-gray-400"}`,children:"A geração continuará em segundo plano"}),e.jsx("button",{onClick:()=>{at(),H([]),Ke(null),fe.current=null,Je({}),u(null),Ue(null);const t=ne||K,n=te||A;t(!1),n(0),v&&v(!1)},className:`mt-4 text-xs transition-all ${a==="dark"?"text-neutral-600 hover:text-red-400":"text-gray-400 hover:text-red-500"}`,children:"Cancelar geração"})]})]})]}),b&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",onClick:()=>Y(null),children:e.jsxs("div",{className:"relative max-w-3xl max-h-[90vh] mx-4",children:[e.jsx("button",{onClick:()=>Y(null),className:"absolute -top-12 right-0 text-white/80 hover:text-white transition-colors",children:e.jsx("i",{className:"fas fa-times text-2xl"})}),e.jsx("img",{src:b.url,alt:b.label,className:"max-w-full max-h-[80vh] rounded-xl object-contain",onClick:t=>t.stopPropagation()}),e.jsx("p",{className:"text-center text-white text-lg font-semibold mt-4",children:b.label})]})}),e.jsx(ua,{isOpen:_e,onConfirm:_t,onCancel:zt,theme:a}),e.jsx($t,{isOpen:w,onClose:()=>{Q(!1),et(null)},onSubmit:Ht,generationType:"product-studio",productName:r.name,theme:a})]})},lt=[{id:"cabeca",label:"👒 Cabeça",items:["Bonés","Chapéus","Tiaras","Lenços"]},{id:"parte-de-cima",label:"👕 Parte de Cima",items:["Camisetas","Blusas","Regatas","Tops","Camisas","Bodies","Jaquetas","Casacos","Blazers","Moletons"]},{id:"parte-de-baixo",label:"👖 Parte de Baixo",items:["Calças","Shorts","Bermudas","Saias","Leggings","Shorts Fitness"]},{id:"pecas-inteiras",label:"👗 Peças Inteiras",items:["Vestidos","Macacões","Jardineiras","Biquínis","Maiôs"]},{id:"calcados",label:"👟 Calçados",items:["Tênis","Sandálias","Botas","Sapatos","Chinelos"]},{id:"acessorios",label:"💍 Acessórios",items:["Bolsas","Cintos","Relógios","Óculos","Bijuterias","Mochilas","Outros Acessórios"]}];lt.flatMap(r=>r.items);const Bt=r=>lt.find(B=>B.items.includes(r)),Sa=["Verão 2025","Inverno 2025","Básicos","Premium","Promoção"],Ia=["Preto","Branco","Azul","Vermelho","Verde","Amarelo","Rosa","Cinza","Marrom","Bege"],Aa=["Masculino","Feminino","Unissex"],_a=({products:r,userCredits:B,onUpdateProduct:de,onDeductCredits:dt,onAddHistoryLog:ce,onImport:rt,currentPlan:Fe,onCheckCredits:a,theme:s="dark",userId:ze,isGenerating:Oe=!1,isMinimized:Te=!1,generationProgress:nt=0,generationText:ne="",onSetGenerating:v,onSetMinimized:te,onSetProgress:Ce,onSetLoadingText:De,isAnyGenerationRunning:xe=!1,onNavigate:P,initialProduct:be,onClearInitialProduct:Re,onBack:$e,onOpenPlanModal:E})=>{var xt,Je;const[T,Se]=o.useState(null),[st,Pe]=o.useState(!1),[_,O]=o.useState(""),[Z,p]=o.useState(""),[R,S]=o.useState("");o.useEffect(()=>{be&&(Se(be),Re==null||Re())},[be,Re]),o.useEffect(()=>{if(T){const l=r.find(u=>u.id===T.id);l&&l!==T&&Se(l)}},[r,T]);const[Ge,Me]=o.useState(!1),[I,b]=o.useState(""),[Y,D]=o.useState(""),[he,Ye]=o.useState(""),[K,Le]=o.useState(""),[A,Xe]=o.useState(""),[pe,qe]=o.useState(""),[ae,He]=o.useState("recent"),[J,ge]=o.useState(!1),[U,it]=o.useState(!1),X=20,[z,Ie]=o.useState(X),[ue,Ve]=o.useState(X);o.useEffect(()=>{Ie(X),Ve(X)},[I,Y,he,K,A,pe,ae]);const ie=o.useMemo(()=>{let l=r.filter(u=>{const w=!I||u.name.toLowerCase().includes(I.toLowerCase())||u.sku.toLowerCase().includes(I.toLowerCase()),Q=Bt(u.category),ye=!Y||(Q==null?void 0:Q.id)===Y,et=!he||u.category===he,fe=!K||u.collection===K,M=!A||u.color===A,Ue=!pe||u.gender===pe;return w&&ye&&et&&fe&&M&&Ue});return ae==="a-z"?l=[...l].sort((u,w)=>u.name.localeCompare(w.name)):ae==="z-a"?l=[...l].sort((u,w)=>w.name.localeCompare(u.name)):l=[...l].sort((u,w)=>new Date(w.updatedAt||0).getTime()-new Date(u.updatedAt||0).getTime()),l},[r,I,Y,he,K,A,pe,ae]),Qe=()=>{b(""),D(""),Ye(""),Le(""),Xe(""),qe(""),He("recent")},_e=I||Y||he||K||A||pe||ae!=="recent",x=l=>{var w;return(((w=l.generatedImages)==null?void 0:w.productStudio)||[]).some(Q=>Q.images.length>0)},g=l=>{var w,Q,ye,et,fe,M,Ue,We;const u=((w=l.generatedImages)==null?void 0:w.productStudio)||[];if(u.length>0){for(const se of u){const Ae=se.images.find(ft=>ft.angle==="front");if(Ae!=null&&Ae.url)return Ae.url}for(const se of u)if((Q=se.images[0])!=null&&Q.url)return se.images[0].url}if((et=(ye=l.originalImages)==null?void 0:ye.front)!=null&&et.url)return l.originalImages.front.url;if((M=(fe=l.images)==null?void 0:fe[0])!=null&&M.url)return l.images[0].url;if((We=(Ue=l.images)==null?void 0:Ue[0])!=null&&We.base64)return l.images[0].base64},W=l=>{var w;return(((w=l.generatedImages)==null?void 0:w.productStudio)||[]).reduce((Q,ye)=>Q+ye.images.length,0)},{optimizedProducts:G,pendingProducts:h}=o.useMemo(()=>{const l=[],u=[];return ie.forEach(w=>{x(w)?l.push(w):u.push(w)}),{optimizedProducts:l,pendingProducts:u}},[ie]),H=l=>{Se(l)},re=()=>{Se(null)},Ke=()=>{Pe(!0),O(""),p(""),S("")},ct=l=>{Se(l),Pe(!1)},me=o.useMemo(()=>h.filter(l=>{const u=!_||l.name.toLowerCase().includes(_.toLowerCase())||l.sku.toLowerCase().includes(_.toLowerCase()),w=Bt(l.category),Q=!Z||(w==null?void 0:w.id)===Z,ye=!R||l.category===R;return u&&Q&&ye}),[h,_,Z,R]);return T?e.jsx(Ca,{product:T,userCredits:B,onUpdateProduct:de,onDeductCredits:dt,onAddHistoryLog:ce,onBack:re,onCheckCredits:a,theme:s,userId:ze,isGenerating:Oe,isMinimized:Te,generationProgress:nt,generationText:ne,onSetGenerating:v,onSetMinimized:te,onSetProgress:Ce,onSetLoadingText:De,isAnyGenerationRunning:xe,onNavigate:P,currentPlan:Fe,onOpenPlanModal:E}):e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 "+(s==="dark"?"bg-black":"bg-gray-50"),style:{paddingTop:"max(1rem, env(safe-area-inset-top, 1rem))"},children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[$e&&e.jsx("button",{onClick:$e,className:"w-10 h-10 rounded-xl flex items-center justify-center transition-all "+(s==="dark"?"bg-white/10 backdrop-blur-xl border border-white/20 text-neutral-300 hover:text-white hover:bg-white/15 shadow-lg":"bg-white/60 backdrop-blur-xl border border-gray-200/60 text-gray-500 hover:text-gray-700 hover:bg-white/80 shadow-sm"),children:e.jsx("i",{className:"fas fa-arrow-left text-sm"})}),e.jsx("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center backdrop-blur-xl "+(s==="dark"?"bg-white/10 border border-white/15":"bg-white/60 border border-gray-200/60 shadow-sm"),children:e.jsx("i",{className:"fas fa-cube text-sm "+(s==="dark"?"text-neutral-200":"text-[#1A1A1A]")})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h1",{className:(s==="dark"?"text-white":"text-gray-900")+" text-lg font-extrabold",children:"Vizzu Product Studio®"}),Fe&&e.jsx("span",{className:(s==="dark"?"bg-gradient-to-r from-[#FF6B6B]/20 to-[#FF9F43]/20 text-[#FF9F43]":"bg-gradient-to-r from-[#FF6B6B] to-[#FF9F43] text-white")+" px-2 py-0.5 text-[9px] font-medium rounded-full uppercase tracking-wide",children:Fe.name})]}),e.jsx("p",{className:(s==="dark"?"text-neutral-500":"text-gray-500")+" text-xs font-serif italic",children:"Fotos profissionais em fundo studio"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"hidden md:flex items-center gap-1.5 px-3 py-1.5 rounded-lg "+(s==="dark"?"bg-neutral-900 border border-neutral-800":"bg-white border border-gray-200 "),children:[e.jsx("i",{className:"fas fa-coins text-[#FF9F43] text-xs"}),e.jsx("span",{className:(s==="dark"?"text-white":"text-gray-900")+" font-medium text-sm",children:B})]}),h.length>0&&e.jsxs("button",{onClick:Ke,className:"hidden md:flex items-center gap-1.5 px-3 py-2 bg-gradient-to-r from-[#FF6B6B] to-[#FF9F43] text-white rounded-lg font-medium text-xs hover:opacity-90 transition-opacity",children:[e.jsx("i",{className:"fas fa-plus"}),e.jsx("span",{children:"Novo"})]})]})]}),e.jsx("div",{className:(s==="dark"?"bg-white/5 border-white/10":"bg-white/60 border-gray-200/60 shadow-sm")+" rounded-xl p-4 border mb-4 backdrop-blur-xl",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center flex-shrink-0 "+(s==="dark"?"bg-white/10":"bg-gray-100"),children:e.jsx("i",{className:(s==="dark"?"text-neutral-400":"text-gray-500")+" fas fa-camera text-lg"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:(s==="dark"?"text-white":"text-gray-900")+" font-semibold text-sm mb-1",children:"Fotos profissionais de produto"}),e.jsx("p",{className:(s==="dark"?"text-neutral-400":"text-gray-600")+" text-xs leading-relaxed",children:"Gere fotos do seu produto em múltiplos ângulos com fundo cinza neutro de estúdio. Ideal para e-commerce, catálogos e marketplaces."}),e.jsx("div",{className:"flex items-center gap-3 mt-2",children:e.jsxs("span",{className:(s==="dark"?"text-neutral-500":"text-gray-500")+" text-[10px]",children:[e.jsx("i",{className:"fas fa-coins text-[#FF9F43] mr-1"}),"1 crédito por foto"]})})]})]})}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("i",{className:(s==="dark"?"text-neutral-600":"text-gray-400")+" fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-sm"}),e.jsx("input",{type:"text",id:"product-studio-search",name:"productSearch",placeholder:"Buscar produtos...",value:I,onChange:l=>b(l.target.value),className:(s==="dark"?"bg-neutral-900 border-neutral-800 text-white placeholder-neutral-500 focus:border-gray-400":"bg-white border-gray-200 text-gray-900 placeholder-gray-400 focus:border-gray-400 ")+" w-full pl-10 pr-4 py-2.5 border rounded-xl text-sm focus:outline-none"}),I&&e.jsx("button",{onClick:()=>b(""),className:(s==="dark"?"text-neutral-500 hover:text-white":"text-gray-400 hover:text-gray-600")+" absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx("i",{className:"fas fa-times text-xs"})})]}),e.jsxs("div",{className:(s==="dark"?"bg-neutral-900 border-neutral-800":"bg-white border-gray-200 ")+" rounded-xl border mb-4",children:[e.jsxs("button",{onClick:()=>Me(!Ge),className:"w-full p-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:(s==="dark"?"text-neutral-500":"text-gray-500")+" fas fa-filter text-xs"}),e.jsx("span",{className:(s==="dark"?"text-neutral-500":"text-gray-500")+" text-[10px] font-medium uppercase tracking-wide",children:"Filtrar e ordenar"}),_e&&e.jsx("span",{className:"px-1.5 py-0.5 bg-gradient-to-r from-[#FF6B6B] to-[#FF9F43] text-white text-[8px] rounded-full",children:[he,K,A,pe,ae!=="recent"?ae:""].filter(Boolean).length})]}),e.jsx("i",{className:(s==="dark"?"text-neutral-500":"text-gray-400")+" fas fa-chevron-"+(Ge?"up":"down")+" text-xs"})]}),Ge&&e.jsxs("div",{className:"px-3 pb-3",children:[_e&&e.jsx("div",{className:"flex justify-end mb-2",children:e.jsx("button",{onClick:Qe,className:"text-[10px] text-[#FF9F43] hover:text-[#FF9F43] font-medium",children:"Limpar filtros"})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:(s==="dark"?"text-neutral-500":"text-gray-500")+" block text-[9px] font-medium uppercase tracking-wide mb-1",children:"Categoria"}),e.jsxs("select",{id:"ps-filter-category-group",name:"filterCategoryGroup",value:Y,onChange:l=>{D(l.target.value),Ye("")},className:(s==="dark"?"bg-neutral-800 border-neutral-700 text-white":"bg-gray-50 border-gray-200 text-gray-900")+" w-full px-2.5 py-2 border rounded-lg text-xs",children:[e.jsx("option",{value:"",children:"Todas"}),lt.map(l=>e.jsx("option",{value:l.id,children:l.label},l.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:(s==="dark"?"text-neutral-500":"text-gray-500")+" block text-[9px] font-medium uppercase tracking-wide mb-1",children:"Subcategoria"}),e.jsxs("select",{id:"ps-filter-subcategory",name:"filterSubcategory",value:he,onChange:l=>Ye(l.target.value),disabled:!Y,className:(s==="dark"?"bg-neutral-800 border-neutral-700 text-white disabled:opacity-50":"bg-gray-50 border-gray-200 text-gray-900 disabled:opacity-50")+" w-full px-2.5 py-2 border rounded-lg text-xs",children:[e.jsx("option",{value:"",children:"Todas"}),Y&&((xt=lt.find(l=>l.id===Y))==null?void 0:xt.items.map(l=>e.jsx("option",{value:l,children:l},l)))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:(s==="dark"?"text-neutral-500":"text-gray-500")+" block text-[9px] font-medium uppercase tracking-wide mb-1",children:"Coleção"}),e.jsxs("select",{id:"ps-filter-collection",name:"filterCollection",value:K,onChange:l=>Le(l.target.value),className:(s==="dark"?"bg-neutral-800 border-neutral-700 text-white":"bg-gray-50 border-gray-200 text-gray-900")+" w-full px-2.5 py-2 border rounded-lg text-xs",children:[e.jsx("option",{value:"",children:"Todas"}),Sa.map(l=>e.jsx("option",{value:l,children:l},l))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:(s==="dark"?"text-neutral-500":"text-gray-500")+" block text-[9px] font-medium uppercase tracking-wide mb-1",children:"Cor"}),e.jsxs("select",{id:"ps-filter-color",name:"filterColor",value:A,onChange:l=>Xe(l.target.value),className:(s==="dark"?"bg-neutral-800 border-neutral-700 text-white":"bg-gray-50 border-gray-200 text-gray-900")+" w-full px-2.5 py-2 border rounded-lg text-xs",children:[e.jsx("option",{value:"",children:"Todas"}),Ia.map(l=>e.jsx("option",{value:l,children:l},l))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:(s==="dark"?"text-neutral-500":"text-gray-500")+" block text-[9px] font-medium uppercase tracking-wide mb-1",children:"Gênero"}),e.jsxs("select",{id:"ps-filter-gender",name:"filterGender",value:pe,onChange:l=>qe(l.target.value),className:(s==="dark"?"bg-neutral-800 border-neutral-700 text-white":"bg-gray-50 border-gray-200 text-gray-900")+" w-full px-2.5 py-2 border rounded-lg text-xs",children:[e.jsx("option",{value:"",children:"Todos"}),Aa.map(l=>e.jsx("option",{value:l,children:l},l))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:(s==="dark"?"text-neutral-500":"text-gray-500")+" block text-[9px] font-medium uppercase tracking-wide mb-1",children:"Ordenar"}),e.jsxs("select",{id:"ps-sort",name:"sortBy",value:ae,onChange:l=>He(l.target.value),className:(s==="dark"?"bg-neutral-800 border-neutral-700 text-white":"bg-gray-50 border-gray-200 text-gray-900")+" w-full px-2.5 py-2 border rounded-lg text-xs",children:[e.jsx("option",{value:"recent",children:"Recentes"}),e.jsx("option",{value:"a-z",children:"A → Z"}),e.jsx("option",{value:"z-a",children:"Z → A"})]})]})]})]})]}),e.jsx("div",{className:(s==="dark"?"bg-neutral-900 border-neutral-800":"bg-white border-gray-200 ")+" rounded-xl border p-4 mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:(s==="dark"?"text-neutral-400":"text-gray-500")+" text-[10px] uppercase tracking-wide",children:"Total"}),e.jsx("p",{className:(s==="dark"?"text-white":"text-gray-900")+" text-2xl font-bold",children:ie.length})]}),e.jsx("div",{className:(s==="dark"?"bg-neutral-800":"bg-gray-200")+" w-px h-10"}),e.jsxs("div",{children:[e.jsxs("p",{className:(s==="dark"?"text-green-400":"text-green-600")+" text-[10px] uppercase tracking-wide flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-check text-[8px]"})," Otimizados"]}),e.jsx("p",{className:(s==="dark"?"text-green-400":"text-green-600")+" text-2xl font-bold",children:G.length})]}),e.jsxs("div",{children:[e.jsxs("p",{className:(s==="dark"?"text-[#FF9F43]":"text-orange-600")+" text-[10px] uppercase tracking-wide flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-clock text-[8px]"})," Pendentes"]}),e.jsx("p",{className:(s==="dark"?"text-[#FF9F43]":"text-orange-600")+" text-2xl font-bold",children:h.length})]})]}),Fe&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:(s==="dark"?"text-neutral-400":"text-gray-500")+" text-[10px] uppercase tracking-wide",children:"Plano"}),e.jsx("span",{className:(s==="dark"?"bg-gradient-to-r from-[#FF6B6B]/20 to-[#FF9F43]/20 text-[#FF9F43]":"bg-gradient-to-r from-[#FF6B6B] to-[#FF9F43] text-white")+" px-3 py-1 text-sm font-medium rounded-full",children:Fe.name})]})]})}),ie.length>0?e.jsxs(e.Fragment,{children:[G.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>ge(!J),className:"w-full flex items-center justify-between mb-3 group",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:(s==="dark"?"bg-green-500/20":"bg-green-100")+" w-6 h-6 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:(s==="dark"?"text-green-400":"text-green-500")+" fas fa-check text-[10px]"})}),e.jsx("h2",{className:(s==="dark"?"text-white":"text-gray-900")+" text-sm font-medium",children:"Produtos Otimizados"}),e.jsx("span",{className:(s==="dark"?"bg-green-500/20 text-green-400":"bg-green-100 text-green-600")+" px-2 py-0.5 text-[10px] font-medium rounded-full",children:G.length>z?`${Math.min(z,G.length)} de ${G.length}`:G.length})]}),e.jsx("div",{className:(s==="dark"?"text-neutral-500 group-hover:text-white":"text-gray-400 group-hover:text-gray-600")+" transition-colors",children:e.jsx("i",{className:"fas fa-chevron-"+(J?"down":"up")+" text-xs"})})]}),!J&&e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:G.slice(0,z).map(l=>{const u=g(l),w=W(l);return e.jsxs("div",{"data-product-id":l.id,onClick:()=>H(l),className:(s==="dark"?"bg-neutral-900 border-neutral-800 hover:border-green-500/50":"bg-white border-gray-200 hover:border-green-300 ")+" rounded-xl border overflow-hidden cursor-pointer transition-all group",children:[e.jsxs("div",{className:(s==="dark"?"bg-neutral-800":"bg-gray-100")+" aspect-square relative overflow-hidden",children:[e.jsx(Ze,{src:u,size:"preview",alt:l.name,className:"w-full h-full group-hover:scale-105 transition-transform"}),e.jsxs("div",{className:"absolute top-2 left-2 px-2 py-0.5 bg-gradient-to-r from-green-500 to-emerald-500 text-white text-[8px] font-bold rounded-full flex items-center gap-1 ",children:[e.jsx("i",{className:"fas fa-sparkles text-[6px]"}),"Otimizado"]}),e.jsxs("div",{className:"absolute top-2 right-2 px-1.5 py-0.5 bg-black/60 backdrop-blur-sm text-white text-[8px] font-medium rounded-full flex items-center gap-1",children:[e.jsx("i",{className:"fas fa-images text-[6px]"}),w]}),e.jsx("div",{className:"absolute bottom-2 left-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("button",{className:"w-full py-1.5 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-lg font-medium text-[10px]",children:[e.jsx("i",{className:"fas fa-eye mr-1"}),"Ver fotos"]})})]}),e.jsxs("div",{className:"p-2.5",children:[e.jsx("p",{className:(s==="dark"?"text-neutral-500":"text-gray-400")+" text-[8px] font-medium uppercase tracking-wide",children:l.sku}),e.jsx("p",{className:(s==="dark"?"text-white":"text-gray-900")+" text-xs font-medium truncate mt-0.5",children:l.name}),l.category&&e.jsx("p",{className:(s==="dark"?"text-neutral-500":"text-gray-500")+" text-[9px] mt-1",children:l.category})]})]},l.id)})}),!J&&z<G.length&&e.jsx("div",{className:"flex justify-center mt-4",children:e.jsxs("button",{onClick:()=>Ie(l=>l+X),className:(s==="dark"?"bg-neutral-800 hover:bg-neutral-700 text-white border-neutral-700":"bg-white hover:bg-gray-50 text-gray-700 border-gray-200 ")+" px-6 py-2.5 border rounded-xl font-medium text-sm flex items-center gap-2 transition-colors",children:[e.jsx("i",{className:"fas fa-chevron-down text-xs"}),"Carregar mais (",G.length-z," restantes)"]})})]}),h.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>it(!U),className:"w-full flex items-center justify-between mb-3 group",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:(s==="dark"?"bg-[#FF9F43]/20":"bg-orange-100")+" w-6 h-6 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"text-[#FF9F43] fas fa-clock text-[10px]"})}),e.jsx("h2",{className:(s==="dark"?"text-white":"text-gray-900")+" text-sm font-medium",children:"Pendentes de otimização"}),e.jsx("span",{className:(s==="dark"?"bg-[#FF9F43]/20 text-[#FF9F43]":"bg-orange-100 text-orange-600")+" px-2 py-0.5 text-[10px] font-medium rounded-full",children:h.length>ue?`${Math.min(ue,h.length)} de ${h.length}`:h.length})]}),e.jsx("div",{className:(s==="dark"?"text-neutral-500 group-hover:text-white":"text-gray-400 group-hover:text-gray-600")+" transition-colors",children:e.jsx("i",{className:"fas fa-chevron-"+(U?"down":"up")+" text-xs"})})]}),!U&&e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3",children:h.slice(0,ue).map(l=>{const u=g(l);return e.jsxs("div",{"data-product-id":l.id,onClick:()=>H(l),className:(s==="dark"?"bg-neutral-900 border-neutral-800 hover:border-gray-400":"bg-white border-gray-200 hover:border-gray-400 ")+" rounded-xl border overflow-hidden cursor-pointer transition-all group",children:[e.jsxs("div",{className:(s==="dark"?"bg-neutral-800":"bg-gray-100")+" aspect-square relative overflow-hidden",children:[e.jsx(Ze,{src:u,size:"preview",alt:l.name,className:"w-full h-full group-hover:scale-105 transition-transform"}),e.jsx("div",{className:"absolute bottom-2 left-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("button",{className:"w-full py-1.5 bg-gradient-to-r from-[#FF6B6B] to-[#FF9F43] text-white rounded-lg font-medium text-[10px]",children:[e.jsx("i",{className:"fas fa-wand-magic-sparkles mr-1"}),"Otimizar"]})})]}),e.jsxs("div",{className:"p-2.5",children:[e.jsx("p",{className:(s==="dark"?"text-neutral-500":"text-gray-400")+" text-[8px] font-medium uppercase tracking-wide",children:l.sku}),e.jsx("p",{className:(s==="dark"?"text-white":"text-gray-900")+" text-xs font-medium truncate mt-0.5",children:l.name}),l.category&&e.jsx("p",{className:(s==="dark"?"text-neutral-500":"text-gray-500")+" text-[9px] mt-1",children:l.category})]})]},l.id)})}),!U&&ue<h.length&&e.jsx("div",{className:"flex justify-center mt-4",children:e.jsxs("button",{onClick:()=>Ve(l=>l+X),className:(s==="dark"?"bg-neutral-800 hover:bg-neutral-700 text-white border-neutral-700":"bg-white hover:bg-gray-50 text-gray-700 border-gray-200 ")+" px-6 py-2.5 border rounded-xl font-medium text-sm flex items-center gap-2 transition-colors",children:[e.jsx("i",{className:"fas fa-chevron-down text-xs"}),"Carregar mais (",h.length-ue," restantes)"]})})]})]}):e.jsxs("div",{className:(s==="dark"?"bg-neutral-900 border-neutral-800":"bg-white border-gray-200 ")+" rounded-xl border p-8 text-center",children:[e.jsx("div",{className:(s==="dark"?"bg-neutral-800":"bg-gray-100")+" w-14 h-14 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("i",{className:(s==="dark"?"text-neutral-600":"text-[#FF9F43]")+" fas fa-search text-xl"})}),e.jsx("h3",{className:(s==="dark"?"text-white":"text-gray-900")+" text-sm font-medium mb-1",children:_e?"Nenhum produto encontrado":"Nenhum produto"}),e.jsx("p",{className:(s==="dark"?"text-neutral-500":"text-gray-500")+" text-xs mb-4",children:_e?"Tente ajustar os filtros":"Importe produtos para começar"}),_e?e.jsx("button",{onClick:Qe,className:(s==="dark"?"bg-neutral-800 text-white hover:bg-neutral-700":"bg-gray-100 text-gray-700 hover:bg-gray-200")+" px-4 py-2 rounded-lg font-medium text-xs transition-colors",children:"Limpar filtros"}):rt&&e.jsxs("button",{onClick:rt,className:"px-4 py-2 bg-gradient-to-r from-[#FF6B6B] to-[#FF9F43] text-white rounded-lg font-medium text-xs hover:opacity-90 transition-opacity",children:[e.jsx("i",{className:"fas fa-plus mr-1.5"}),"Importar produto"]})]})]}),st&&e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:(s==="dark"?"bg-neutral-900 border-neutral-800":"bg-white border-gray-200")+" rounded-2xl border w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:(s==="dark"?"border-neutral-800":"border-gray-200")+" border-b p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:(s==="dark"?"text-white":"text-gray-900")+" text-lg font-semibold font-serif",children:"Selecione o produto para otimizar"}),e.jsxs("p",{className:(s==="dark"?"text-neutral-500":"text-gray-500")+" text-xs",children:["Produtos ainda não otimizados (",me.length,")"]})]}),e.jsx("button",{onClick:()=>Pe(!1),className:(s==="dark"?"text-neutral-500 hover:text-white":"text-gray-400 hover:text-gray-600")+" w-8 h-8 flex items-center justify-center rounded-lg hover:bg-neutral-800/50 transition-colors",children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("div",{className:"p-4 flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("i",{className:(s==="dark"?"text-neutral-600":"text-gray-400")+" fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-sm"}),e.jsx("input",{type:"text",id:"ps-modal-search",name:"productModalSearch",placeholder:"Buscar produto...",value:_,onChange:l=>O(l.target.value),className:(s==="dark"?"bg-neutral-800 border-neutral-700 text-white placeholder-neutral-500":"bg-gray-50 border-gray-200 text-gray-900 placeholder-gray-400")+" w-full pl-10 pr-4 py-2.5 border rounded-xl text-sm focus:outline-none focus:border-gray-400",autoFocus:!0})]}),e.jsxs("select",{id:"ps-modal-category",name:"productModalCategory",value:Z,onChange:l=>{p(l.target.value),S("")},className:(s==="dark"?"bg-neutral-800 border-neutral-700 text-white":"bg-gray-50 border-gray-200 text-gray-900")+" px-4 py-2.5 border rounded-xl text-sm sm:w-40",children:[e.jsx("option",{value:"",children:"Categoria"}),lt.map(l=>e.jsx("option",{value:l.id,children:l.label},l.id))]}),Z&&e.jsxs("select",{id:"ps-modal-subcategory",name:"productModalSubcategory",value:R,onChange:l=>S(l.target.value),className:(s==="dark"?"bg-neutral-800 border-neutral-700 text-white":"bg-gray-50 border-gray-200 text-gray-900")+" px-4 py-2.5 border rounded-xl text-sm sm:w-40",children:[e.jsx("option",{value:"",children:"Subcategoria"}),(Je=lt.find(l=>l.id===Z))==null?void 0:Je.items.map(l=>e.jsx("option",{value:l,children:l},l))]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 pt-0",children:me.length>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3",children:me.map(l=>{const u=g(l);return e.jsxs("div",{onClick:()=>ct(l),className:(s==="dark"?"bg-neutral-800 border-neutral-700 hover:border-gray-400":"bg-gray-50 border-gray-200 hover:border-gray-400")+" rounded-xl border overflow-hidden cursor-pointer transition-all group",children:[e.jsxs("div",{className:(s==="dark"?"bg-neutral-700":"bg-gray-100")+" aspect-square relative overflow-hidden",children:[e.jsx(Ze,{src:u,size:"preview",alt:l.name,className:"w-full h-full group-hover:scale-105 transition-transform"}),e.jsx("div",{className:"absolute bottom-2 left-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("button",{className:"w-full py-1.5 bg-gradient-to-r from-[#FF6B6B] to-[#FF9F43] text-white rounded-lg font-medium text-[10px]",children:[e.jsx("i",{className:"fas fa-wand-magic-sparkles mr-1"}),"Otimizar"]})})]}),e.jsxs("div",{className:"p-2.5",children:[e.jsx("p",{className:(s==="dark"?"text-neutral-500":"text-gray-400")+" text-[8px] font-medium uppercase tracking-wide",children:l.sku}),e.jsx("p",{className:(s==="dark"?"text-white":"text-gray-900")+" text-xs font-medium truncate mt-0.5",children:l.name}),l.category&&e.jsx("p",{className:(s==="dark"?"text-neutral-500":"text-gray-500")+" text-[9px] mt-1",children:l.category})]})]},l.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:(s==="dark"?"bg-neutral-800":"bg-gray-100")+" w-14 h-14 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx("i",{className:(s==="dark"?"text-neutral-600":"text-gray-400")+" fas fa-check-circle text-xl"})}),e.jsx("p",{className:(s==="dark"?"text-white":"text-gray-900")+" font-medium text-sm mb-1",children:_||Z||R?"Nenhum produto encontrado":"Todos os produtos estão otimizados!"}),e.jsx("p",{className:(s==="dark"?"text-neutral-500":"text-gray-500")+" text-xs",children:_||Z||R?"Tente ajustar os filtros":"Importe novos produtos para continuar"})]})})]})})]})};export{_a as ProductStudio};
